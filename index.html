<!doctype html> <!-- 100001: Khai báo doctype HTML5 -->
<html lang="vi"> <!-- 100002: Thẻ html ngôn ngữ tiếng Việt -->
<head> <!-- 100003: Phần đầu tài liệu -->
<meta charset="utf-8"> <!-- 100004: Bảng mã UTF-8 -->
<meta name="viewport" content="width=device-width, initial-scale=1"/> <!-- 100005: Responsive viewport -->
<title>2606AI – Theme Xanh Lá</title> <!-- 100006: Tiêu đề trang -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"> <!-- 100007: CSS Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet"> <!-- 100008: Bootstrap Icons -->
<style> /* 100009: Bắt đầu CSS nội tuyến */
/* 200001: ===== TOKEN MÀU – CHỦ ĐỀ TRE/TRÚC ===== */
:root{
  --bamboo-1:#4CAF50;          /* 200002: xanh tre chủ đạo */
  --bamboo-2:#81C784;          /* 200003: xanh non */
  --bamboo-3:#1B5E20;          /* 200004: xanh rừng đậm (text nhấn) */
  --bamboo-brown:#8D6E63;      /* 200005: nâu thân tre */
  --bamboo-brown-2:#A1887F;    /* 200006: nâu nhạt viền */
  --bamboo-ivory:#FAFAF5;      /* 200007: trắng ngà – gợi giấy dó */
  --bamboo-bg:#F3F7F1;         /* 200008: nền xanh lá rất nhạt */
  --bamboo-grad:linear-gradient(90deg,#43a047 0%,#66bb6a 100%); /* 200009: gradient xanh tre */
  --bamboo-grad-alt:linear-gradient(90deg,#66bb6a 0%,#8d6e63 100%); /* 200010: xanh → nâu */
  --shadow-sm:0 1px 2px rgba(0,0,0,.06);       /* 200011 */
  --shadow-md:0 6px 18px rgba(45,85,52,.14);   /* 200012 */
}

/* 200020: ===== NỀN & TYPO ===== */
html,body{height:100%}
body{
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  font-size:14px; color:#1f2937;
  background:
    /* 200021: lớp họa tiết đốt tre mờ */
    radial-gradient(1200px 1200px at -10% -10%, rgba(141,110,99,.08), transparent 40%),
    radial-gradient(900px 900px at 110% 110%, rgba(76,175,80,.06), transparent 45%),
    repeating-linear-gradient( to bottom, rgba(141,110,99,.065) 0 2px, rgba(141,110,99,.03) 2px 34px, transparent 34px 36px ),
    var(--bamboo-bg);
  padding-top:70px;
}
img{max-width:100%;display:block}
.wrap{max-width:1250px;margin:0 auto}

/* 200040: ===== HEADER ===== */
.site-header{
  position:fixed; inset:0 0 auto 0; z-index:1055;
  background:var(--bamboo-ivory);
  border-bottom:2px solid rgba(141,110,99,.25);
  box-shadow:var(--shadow-sm);
  padding:10px 15px;
}
.site-header .wrap{display:flex;align-items:center;gap:12px}
.site-header .logo{width:100px;object-fit:contain}
.header-search .form-control{font-size:13px;padding:6px 10px;border-radius:999px;border:1.5px solid #dfe7dd;background:#fff}
.header-search .btn{
  border:2px solid var(--bamboo-1); color:var(--bamboo-1);
  background:#fff; border-radius:999px; font-weight:700; padding:6px 16px;
}
.header-search .btn:hover{background:#e8f5e9;color:var(--bamboo-3)}

/* 200060: ===== TOP BANNER CHẠY CHỮ ===== */
.top-banner{
  position:sticky; top:70px; z-index:1020; height:32px;
  display:flex; align-items:center; justify-content:center;
  color:#fff; background:var(--bamboo-grad); font-weight:700; overflow:hidden;
  border-bottom:1px solid rgba(141,110,99,.25);
}
.top-banner .marquee{white-space:nowrap; animation:marq 40s linear infinite}
@keyframes marq{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}

/* 200080: ===== SIDEBAR ===== */
.sidebar-box{
  background:#fff; border:1.5px solid var(--bamboo-brown-2);
  border-radius:14px; padding:12px; box-shadow:var(--shadow-sm);
  margin-bottom:12px; backdrop-filter:saturate(120%);
}
.sidebar-box h6{font-weight:800; font-size:15px; margin-bottom:8px; color:var(--bamboo-3)}

/* 200090: Dịch vụ hỗ trợ – “lá tre” */
.benefits .item{
  background:linear-gradient(180deg,#ffffff 0%, #f7faf7 100%);
  border:1px solid #e0e5df; border-radius:12px; padding:10px;
  display:flex; align-items:center; gap:10px;
  box-shadow:0 2px 8px rgba(52,82,61,.05);
}
.benefits .item .ic{
  width:30px;height:30px;border-radius:10px;
  background:
    linear-gradient(145deg, #ecf7ee 0%, #e2f2e6 100%),
    radial-gradient(16px 16px at 70% 30%, rgba(76,175,80,.18), transparent);
  display:flex;align-items:center;justify-content:center;
  box-shadow:inset 0 0 0 1px rgba(76,175,80,.25);
}
.benefits .item .ttl{font-size:13px;font-weight:700;color:#2e3e2f}
.benefits .item .sub{font-size:12px;color:#6b7280}

/* 200110: ===== GROUP BAR + CATEGORY ===== */
.category-box{
  background:#fff; border:1.5px solid var(--bamboo-brown-2);
  border-radius:14px; padding:12px; box-shadow:var(--shadow-sm);
}
.group-bar{display:flex;gap:8px;overflow:auto;scrollbar-width:none;margin-bottom:8px}
.group-bar::-webkit-scrollbar{display:none}
.group-chip{
  display:flex;align-items:center;gap:8px;
  padding:10px 14px; border:1.5px solid #d6e7d4;
  border-radius:12px; background:#f6fbf5; color:var(--bamboo-3);
  font-weight:700; cursor:pointer; white-space:nowrap;
  transition:transform .12s ease, box-shadow .12s ease, background .12s;
}
.group-chip img{width:26px;height:26px;object-fit:contain}
.group-chip:hover{background:#e8f5e9; box-shadow:0 3px 10px rgba(45,85,52,.08)}
.group-chip.active{
  background:var(--bamboo-grad-alt); color:#fff; border-color:transparent;
  box-shadow:0 5px 16px rgba(141,110,99,.25);
}

.category-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:12px}
.category-item{
  text-align:center; padding:10px; border-radius:12px;
  border:1.5px solid rgba(141,110,99,.25); background:#fff; cursor:pointer;
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s;
}
.category-item .icon{
  width:54px;height:54px;margin:0 auto 6px;border-radius:14px;
  background:
    linear-gradient(180deg,#f0f7f0 0%,#e7f2e6 100%),
    radial-gradient(18px 18px at 70% 30%, rgba(76,175,80,.16), transparent);
  display:flex;align-items:center;justify-content:center;
  box-shadow:inset 0 0 0 1px rgba(76,175,80,.25);
}
.category-item .icon img{width:32px;height:32px;object-fit:contain}
.category-item:hover{transform:translateY(-2px); box-shadow:0 5px 16px rgba(45,85,52,.10)}
.category-item.active{
  background:#f3fbf1; border-color:#a5d6a7;
  box-shadow:0 6px 18px rgba(45,85,52,.12);
}

/* 200160: ===== STATS + PAGER ===== */
.stats-row{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap;margin-bottom:8px}
.pager .btn{padding:.35rem .6rem;font-size:.875rem;border-radius:.5rem;border:1px solid #cfd8cc;background:#fff;color:#2f3e30}
.pager .btn:hover{background:#eff6ef}

/* 200180: ===== CARD SẢN PHẨM – “đốt tre” ===== */
.cardx{
  background:#fff; border:none; border-radius:14px; overflow:hidden;
  box-shadow:0 2px 10px rgba(45,85,52,.06);
  transition:transform .15s ease, box-shadow .15s ease;
  height:100%; display:flex; flex-direction:column;
  outline:1.5px solid rgba(141,110,99,.15);
}
.cardx:hover{transform:translateY(-3px); box-shadow:var(--shadow-md)}
.cardx .thumb{
  height:180px; width:100%; object-fit:cover;
  background:
    repeating-linear-gradient( to bottom,
      rgba(141,110,99,.08) 0 2px,
      rgba(141,110,99,.04) 2px 36px,
      transparent 36px 38px),
    #fff;
}
.cardx .meta{padding:10px;flex:1;display:flex;flex-direction:column;gap:6px}
.cardx .id{font-weight:800;color:var(--bamboo-3);font-size:13px}
.cardx .details{font-size:12px;color:#667;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.cardx .price{font-weight:700;color:#c62828}
.btn-gift{
  background:#fff;border:1.6px solid var(--bamboo-1);color:var(--bamboo-1);
  font-weight:700;padding:7px 14px;border-radius:999px;font-size:12px;line-height:1;
  text-decoration:none; transition:all .12s ease;
}
.btn-gift:hover{background:#e8f5e9;color:var(--bamboo-3)}
.add-btn{
  border:none;background:var(--bamboo-grad);color:#fff;border-radius:50%;
  width:34px;height:34px;font-size:18px;font-weight:800;box-shadow:0 4px 12px rgba(76,175,80,.35)
}

/* 200220: ===== XƯỞNG ĐỀ XUẤT ===== */
.xuong-box{
  background:linear-gradient(180deg,#ffffff 0%, #f8fbf7 100%);
  border:1.5px solid #cfd8cc; border-radius:14px; box-shadow:var(--shadow-sm);
}
.xuong-box .link-preview{
  display:flex;gap:10px;background:#fff;border:1px solid #e1eadf;border-radius:10px;
  padding:8px;text-decoration:none; transition:box-shadow .12s ease, transform .12s ease;
}
.xuong-box .link-preview:hover{box-shadow:0 6px 18px rgba(52,82,61,.10); transform:translateY(-2px)}
.xuong-box .thumb{width:44px;height:44px;border-radius:8px;object-fit:cover;background:#f1f1f1}
.xuong-box .title{font-weight:700;color:var(--bamboo-3);font-size:13px}

/* 200250: ===== FAB (NÚT NỔI) – icon trên nền lá tre ===== */
.fab{
  position:fixed;right:16px;width:54px;height:54px;border:none;border-radius:50%;
  color:#fff;font-size:22px;box-shadow:0 8px 20px rgba(45,85,52,.28);z-index:1055;
  display:flex;align-items:center;justify-content:center;
  background:
    radial-gradient(22px 22px at 35% 30%, rgba(255,255,255,.18), transparent),
    var(--bamboo-1);
}
#filterFab{background:#6c757d;bottom:212px}
#cartFab{background:var(--bamboo-grad);bottom:148px}
#suppliersFab{background:#0d6efd;bottom:84px}
#zaloFab{background:#25D366;bottom:20px}
.fab .badge{
  position:absolute;top:-6px;right:-6px;background:#d32f2f;color:#fff;border-radius:999px;
  padding:2px 6px;font-size:12px;font-weight:800;display:none;box-shadow:0 2px 8px rgba(211,47,47,.35)
}

/* 200280: ===== FOOTER – “gốc tre bám đất” ===== */
footer{
  background:linear-gradient(180deg, #4CAF50 0%, #3b7a3e 38%, #6f554c 100%);
  color:#fff; border-top:2px solid rgba(141,110,99,.35);
}
footer .accent{color:#ffe082}
footer a.link-light{text-decoration:none}
footer a.link-light:hover{text-decoration:underline}

/* 200300: ===== ERRBOX ===== */
#errbox{
  position:fixed;left:8px;right:8px;bottom:8px;z-index:3000;
  background:#ffefef;border:1px solid #e99;border-radius:8px;padding:8px;
  display:none;white-space:pre-wrap;font-family:ui-monospace,Consolas,monospace
}

/* 200320: ===== RESPONSIVE ===== */
@media (max-width:1200px){ .category-grid{grid-template-columns:repeat(5,1fr)} }
@media (max-width:992px){  .category-grid{grid-template-columns:repeat(4,1fr)} }
@media (max-width:768px){  .category-grid{grid-template-columns:repeat(3,1fr)} }
@media (max-width:576px){  .category-grid{grid-template-columns:repeat(2,1fr)} }

</style> <!-- 100087: Kết thúc CSS -->
</head> <!-- 100088: Kết thúc head -->
<body> <!-- 100089: Bắt đầu body -->
<header class="site-header"> <!-- 100090: Header cố định -->
  <div class="wrap"> <!-- 100091: Container header -->
    <a id="logoLink" href="#" class="d-flex align-items-center text-decoration-none"> <!-- 100092: Link logo về đầu trang -->
      <img src="https://drive.google.com/thumbnail?id=1e9N6rgsTP5vYtKl4Lwq801dfteYLbx_F&sz=w160" class="logo" alt="2606AI"> <!-- 100093: Ảnh logo -->
    </a> <!-- 100094: Hết link logo -->
    <form class="header-search d-flex gap-2 m-0 flex-grow-1" onsubmit="return false;"> <!-- 100095: Form tìm kiếm -->
      <div class="input-group w-100"> <!-- 100096: Nhóm input + nút -->
        <input id="searchBox" class="form-control" placeholder="Tìm sản phẩm... (ID, mô tả)"> <!-- 100097: Ô nhập từ khóa -->
        <button id="searchBtn" class="btn" type="button">Tìm</button> <!-- 100098: Nút tìm kiếm -->
      </div> <!-- 100099: Hết nhóm input -->
    </form> <!-- 100100: Hết form tìm -->
  </div> <!-- 100101: Hết header wrap -->
</header> <!-- 100102: Kết thúc header -->

<div class="top-banner" role="region" aria-label="Thông báo"> <!-- 100103: Thanh thông báo -->
  <div class="wrap"><div class="marquee">Nguồn thu của 2606AI.VN đến từ quảng cáo • Tự tin sản xuất mọi sản phẩm • Dịch vụ hỗ trợ xanh</div></div> <!-- 100104: Nội dung chạy -->
</div> <!-- 100105: Kết thúc top-banner -->

<div class="container-fluid my-3 wrap"> <!-- 100106: Khối nội dung chính -->
  <div class="row g-3"> <!-- 100107: Lưới 2 cột -->
    <aside class="col-lg-3 col-md-4"> <!-- 100108: Cột trái sidebar -->
      <div class="sidebar-box benefits"> <!-- 100109: Hộp dịch vụ -->
        <h6>Dịch vụ hỗ trợ</h6> <!-- 100110: Tiêu đề dịch vụ -->
        <div class="item"><div class="ic">💬</div><div><div class="ttl">Tư vấn sản xuất</div><div class="sub">Miễn phí, nhanh</div></div></div> <!-- 100111: Mục dịch vụ 1 -->
        <div class="item"><div class="ic">🎨</div><div><div class="ttl">Thiết kế 2D/3D</div><div class="sub">Miễn phí</div></div></div> <!-- 100112: Mục dịch vụ 2 -->
        <div class="item"><div class="ic">📦</div><div><div class="ttl">Hậu cần – đóng gói</div><div class="sub">Có phí</div></div></div> <!-- 100113: Mục dịch vụ 3 -->
        <div class="item"><div class="ic">🛡️</div><div><div class="ttl">Hỗ trợ tranh chấp</div><div class="sub">Có phí</div></div></div> <!-- 100114: Mục dịch vụ 4 -->
      </div> <!-- 100115: Hết hộp dịch vụ -->

      <div id="xuongBox" class="sidebar-box xuong-box"> <!-- 100116: Hộp xưởng đề xuất -->
        <h6 class="d-flex align-items-center justify-content-between"> <!-- 100117: Tiêu đề xưởng -->
          <span>Xưởng đề xuất <span id="xuongCount" class="badge bg-success" style="display:none">0</span></span> <!-- 100118: Badge số xưởng -->
          <a id="xuongContactBtn" href="#" target="_blank" rel="noopener" class="btn btn-sm fw-bold" style="border-radius:999px;background:#ffca28;color:#0d47a1;border:none">📢 Liên hệ quảng cáo</a> <!-- 100119: Nút liên hệ -->
        </h6> <!-- 100120: Hết tiêu đề xưởng -->
        <div id="xuongList" class="d-flex flex-column gap-2"></div> <!-- 100121: Danh sách xưởng -->
        <div id="xuongEmpty" class="small text-muted">Đang tải dữ liệu…</div> <!-- 100122: Trạng thái rỗng -->
      </div> <!-- 100123: Hết hộp xưởng -->
    </aside> <!-- 100124: Kết thúc cột trái -->

    <main class="col-lg-9 col-md-8"> <!-- 100125: Cột phải nội dung chính -->
      <div class="row g-2 mb-2"> <!-- 100126: Hàng hero -->
        <div class="col-md-8"> <!-- 100127: Cột banner chính -->
          <div id="heroMain" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000"> <!-- 100128: Carousel hero -->
            <div class="carousel-inner"> <!-- 100129: Vùng slide -->
              <div class="carousel-item active"><img class="d-block w-100" src="https://picsum.photos/1200/300?random=11" alt="Banner 1"></div> <!-- 100130: Slide 1 -->
              <div class="carousel-item"><img class="d-block w-100" src="https://picsum.photos/1200/300?random=12" alt="Banner 2"></div> <!-- 100131: Slide 2 -->
              <div class="carousel-item"><img class="d-block w-100" src="https://picsum.photos/1200/300?random=13" alt="Banner 3"></div> <!-- 100132: Slide 3 -->
            </div> <!-- 100133: Hết slide -->
            <button class="carousel-control-prev" type="button" data-bs-target="#heroMain" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button> <!-- 100134: Nút prev -->
            <button class="carousel-control-next" type="button" data-bs-target="#heroMain" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button> <!-- 100135: Nút next -->
          </div> <!-- 100136: Kết thúc carousel -->
        </div> <!-- 100137: Hết cột banner chính -->
        <div class="col-md-4 d-flex flex-column gap-2"> <!-- 100138: Cột banner phụ -->
          <img src="https://picsum.photos/600/145?random=21" alt="promo"/> <!-- 100139: Banner phụ 1 -->
          <img src="https://picsum.photos/600/145?random=22" alt="promo"/> <!-- 100140: Banner phụ 2 -->
        </div> <!-- 100141: Hết cột banner phụ -->
      </div> <!-- 100142: Kết thúc hàng hero -->

      <section class="category-box mb-3"> <!-- 100143: Khối nhóm + danh mục -->
        <div id="groupBar" class="group-bar"></div> <!-- 100144: Thanh group -->
        <div class="mt-2"><div id="categoryGrid" class="category-grid"></div></div> <!-- 100145: Lưới danh mục -->
      </section> <!-- 100146: Hết khối category -->

      <div class="stats-row"> <!-- 100147: Hàng thống kê + phân trang -->
        <div class="d-flex align-items-center gap-2 flex-wrap"> <!-- 100148: Cụm trái -->
          <span>Tìm thấy</span> <!-- 100149: Nhãn đếm -->
          <span id="totalCount" class="badge text-bg-success">0</span> <!-- 100150: Số lượng tổng -->
          <button id="clearFilters" class="btn btn-sm btn-outline-danger ms-2">Xóa bộ lọc</button> <!-- 100151: Nút xóa lọc -->
        </div> <!-- 100152: Hết cụm trái -->
        <div id="pagerTop" class="pager"></div> <!-- 100153: Pager trên -->
      </div> <!-- 100154: Kết thúc hàng thống kê -->

      <div id="productGrid" class="row row-cols-2 row-cols-md-3 row-cols-lg-6 g-2" aria-live="polite"></div> <!-- 100155: Lưới sản phẩm -->
      <div id="pagerBottom" class="pager mt-3 text-end"></div> <!-- 100156: Pager dưới -->

      <div class="my-3"> <!-- 100157: Quảng cáo cuối nội dung -->
        <img src="https://picsum.photos/1200/200?random=91" class="w-100 rounded-3 shadow-sm" alt="ads"/> <!-- 100158: Ảnh ads -->
      </div> <!-- 100159: Hết ads -->
    </main> <!-- 100160: Kết thúc cột phải -->
  </div> <!-- 100161: Kết thúc row -->
</div> <!-- 100162: Kết thúc container -->

<!-- Offcanvas: Cart --> <!-- 100163: Bảng trượt giỏ hàng -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="cartCanvas"> <!-- 100164: Offcanvas giỏ hàng -->
  <div class="offcanvas-header"><h5 class="mb-0">Giỏ hàng</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button></div> <!-- 100165: Header offcanvas -->
  <div class="offcanvas-body"> <!-- 100166: Thân offcanvas -->
    <div id="cartList"></div> <!-- 100167: Danh sách item giỏ -->
    <div class="d-flex justify-content-between align-items-center border rounded-3 p-2 my-2 bg-light"><span>Tổng cộng</span><span id="cartTotal" class="fw-bold text-danger">0 đ</span></div> <!-- 100168: Tổng tiền -->
    <input id="buyerName" class="form-control mb-2" placeholder="Họ và tên"> <!-- 100169: Tên người mua -->
    <input id="buyerEmail" class="form-control mb-2" placeholder="Email"> <!-- 100170: Email -->
    <input id="buyerPhone" class="form-control mb-2" placeholder="Số điện thoại"> <!-- 100171: Điện thoại -->
    <input id="buyerAddress" class="form-control mb-2" placeholder="Địa chỉ nhận hàng"> <!-- 100172: Địa chỉ -->
    <textarea id="buyerNote" class="form-control mb-2" placeholder="Ghi chú"></textarea> <!-- 100173: Ghi chú -->
    <button class="btn btn-success w-100" id="submitOrderBtn">Gửi đơn hàng</button> <!-- 100174: Nút gửi đơn -->
  </div> <!-- 100175: Hết thân offcanvas -->
</div> <!-- 100176: Kết thúc offcanvas giỏ -->

<!-- Offcanvas: Filters --> <!-- 100177: Bảng trượt bộ lọc -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="filterPanel"> <!-- 100178: Offcanvas lọc -->
  <div class="offcanvas-header"><h5 class="mb-0">Bộ lọc</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button></div> <!-- 100179: Header -->
  <div class="offcanvas-body"> <!-- 100180: Thân -->
    <h6>TYPE</h6><div id="typeBox" class="mb-3"></div> <!-- 100181: Nhóm lọc Type -->
    <h6>LOẠI</h6><div id="loaiBox" class="mb-3"></div> <!-- 100182: Nhóm lọc Loại -->
    <h6>CHÚ Ý</h6><div id="noteBox" class="mb-3"></div> <!-- 100183: Nhóm lọc Chú ý -->
    <h6>DANH MỤC</h6><div id="brandBox" class="mb-3"></div> <!-- 100184: Nhóm lọc Danh mục -->
  </div> <!-- 100185: Hết thân -->
</div> <!-- 100186: Kết thúc offcanvas lọc -->

<!-- Offcanvas: Suppliers --> <!-- 100187: Bảng trượt xưởng -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="suppliersCanvas"> <!-- 100188: Offcanvas xưởng -->
  <div class="offcanvas-header"><h5 class="mb-0">Danh sách xưởng</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button></div> <!-- 100189: Header -->
  <div class="offcanvas-body"><div id="suppliersList">Chưa có dữ liệu.</div></div> <!-- 100190: Thân -->
</div> <!-- 100191: Kết thúc offcanvas xưởng -->

<!-- FABs --> <!-- 100192: Các nút nổi -->
<button id="filterFab" class="fab" title="Bộ lọc">⚙️</button> <!-- 100193: FAB bộ lọc -->
<button id="cartFab" class="fab" title="Giỏ hàng">🛒 <span id="cartFabCount" class="badge">0</span></button> <!-- 100194: FAB giỏ hàng -->
<button id="suppliersFab" class="fab" title="Xưởng">🏭</button> <!-- 100195: FAB xưởng -->
<a id="zaloFab" class="fab" title="Zalo" href="#" target="_blank" rel="noopener">💬</a> <!-- 100196: FAB Zalo -->

<div id="errbox" role="alert" aria-live="assertive"></div> <!-- 100197: Hộp lỗi nổi -->

<footer class="mt-4 py-4"> <!-- 100198: Footer -->
  <div class="wrap"> <!-- 100199: Container footer -->
    <div class="row g-4"> <!-- 100200: Lưới 4 cột footer -->
      <div class="col-md-3 text-center"> <!-- 100201: Cột logo -->
        <img src="https://drive.google.com/thumbnail?id=1e9N6rgsTP5vYtKl4Lwq801dfteYLbx_F&sz=w120" class="mb-2" alt="logo"> <!-- 100202: Ảnh logo footer -->
        <p class="small">Hỗ trợ sản xuất ấn phẩm thương hiệu.</p> <!-- 100203: Mô tả -->
      </div> <!-- 100204: Hết cột logo -->
      <div class="col-md-3"> <!-- 100205: Cột liên kết nhanh -->
        <h6 class="accent">Liên kết nhanh</h6> <!-- 100206: Tiêu đề -->
        <ul class="list-unstyled small"> <!-- 100207: Danh sách -->
          <li>Về chúng tôi</li> <!-- 100208: Item -->
          <li>Danh mục</li> <!-- 100209: Item -->
          <li>Báo giá nhanh</li> <!-- 100210: Item -->
        </ul> <!-- 100211: Hết danh sách -->
      </div> <!-- 100212: Hết cột liên kết nhanh -->
      <div class="col-md-3"> <!-- 100213: Cột chính sách -->
        <h6 class="accent">Chính sách</h6> <!-- 100214: Tiêu đề -->
        <ul class="list-unstyled small"> <!-- 100215: Danh sách -->
          <li>Vận chuyển</li> <!-- 100216: Item -->
          <li>Đổi trả</li> <!-- 100217: Item -->
          <li>Bảo mật</li> <!-- 100218: Item -->
        </ul> <!-- 100219: Hết danh sách -->
      </div> <!-- 100220: Hết cột chính sách -->
      <div class="col-md-3 small"> <!-- 100221: Cột liên hệ -->
        <h6 class="accent">Liên hệ</h6> <!-- 100222: Tiêu đề -->
        <div><i class="bi bi-geo-alt me-1"></i> 123 Q1, TP.HCM</div> <!-- 100223: Địa chỉ -->
        <div><i class="bi bi-telephone me-1"></i> 0909 123 456</div> <!-- 100224: Điện thoại -->
        <div><i class="bi bi-envelope me-1"></i> info@2606ai.vn</div> <!-- 100225: Email -->
      </div> <!-- 100226: Hết cột liên hệ -->
    </div> <!-- 100227: Hết lưới 4 cột -->
    <hr class="border-light opacity-50 my-3"> <!-- 100228: Gạch phân cách -->
    <div class="text-center small">© 2025 <span class="accent">2606AI</span>. Phát triển bởi 2606AI.</div> <!-- 100229: Bản quyền -->
  </div> <!-- 100230: Hết wrap footer -->
</footer> <!-- 100231: Kết thúc footer -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script> <!-- 100232: JS Bootstrap -->
<script> // 100233: Bắt đầu script chính
// ==== Config & state ==== // 100234: Cấu hình + trạng thái
const API_URL = "https://script.google.com/macros/s/AKfycby2PjYOKiRRphQCOI9eSDo8ShAY-Bugp_gQD7JjgJPaYE7fmaoDjbP4kXGWLpOQxWOh/exec"; // 100235: URL Apps Script
const ZALO_URL = "https://zalo.me/123456789"; // 100236: Liên kết Zalo
const state = { page:1, pageSize:36, q:"", group:"", type:"", loai:"", note:"", category:"", totalPages:1 }; // 100237: Trạng thái lọc & trang
const products = {}; const cart = []; // 100238: Bộ nhớ tạm sản phẩm + giỏ

// ==== Utils ==== // 100239: Hàm tiện ích
const $ = s=>document.querySelector(s); // 100240: Query một phần tử
const $$ = s=>Array.from(document.querySelectorAll(s)); // 100241: Query nhiều phần tử
const esc = s => (s??'').toString().replace(/[&<>\"]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;'}[c])); // 100242: Escape HTML
const fmtVND = n => (Number(n)||0).toLocaleString('vi-VN') + ' đ'; // 100243: Định dạng tiền VND
const firstLink = s=>{ if(!s) return ''; const parts=String(s).split(/[\s,;|\n]+/).filter(Boolean); for(const p of parts) if(/^https?:\/\//i.test(p)) return p; return '' } // 100244: Lấy link đầu tiên
const FALLBACK_ICON='https://placehold.co/64x64?text=%20&bg=E8F5E9&fc=2E7D32'; // 100245: Ảnh thay thế
function toDriveThumb(u){ if(!u) return FALLBACK_ICON; const m=String(u).match(/\/d\/([^/]+)\//); if(m&&m[1]) return `https://drive.google.com/thumbnail?id=${m[1]}&sz=w200`; if(/drive\.google\.com\/thumbnail\?id=/i.test(u)) return u; return u; } // 100246: Chuẩn hóa link Drive
function safeImg(u){ if(!u) return FALLBACK_ICON; const url=toDriveThumb(u); return /^https?:\/\//i.test(url)?url:FALLBACK_ICON; } // 100247: Ảnh an toàn

// ==== Dữ liệu nhóm & danh mục (demo) ==== // 100248: Mảng cấu hình
const GROUPS=[ 'QUÀ TẶNG ẤN PHẨM THƯƠNG HIỆU','QUÀ TẶNG SẢN PHẨM THƯƠNG HIỆU','QUÀ TẶNG KỶ NIỆM EVENT','PHỤ KIỆN THƯƠNG HIỆU','ĐỐI TÁC 247 EXPRESS','KHÁC' ]; // 100249: Danh sách group
const GROUP_ICONS={ 'QUÀ TẶNG ẤN PHẨM THƯƠNG HIỆU':'https://img.icons8.com/fluency/96/advertising.png','QUÀ TẶNG SẢN PHẨM THƯƠNG HIỆU':'https://img.icons8.com/fluency/96/product.png','QUÀ TẶNG KỶ NIỆM EVENT':'https://img.icons8.com/fluency/96/conference-foreground-selected.png','PHỤ KIỆN THƯƠNG HIỆU':'https://img.icons8.com/fluency/96/electronics.png','ĐỐI TÁC 247 EXPRESS':'https://drive.google.com/thumbnail?id=1ixc_p6X925a0JpSG4YIWwpyauVmhRakI&sz=w200','KHÁC':'https://img.icons8.com/fluency/96/more.png' }; // 100250: Icon cho group
const CAT_CONFIG=[ {label:'Huy chương phôi sẵn',category:'Huy chương phôi sẵn'},{label:'Huy chương sự kiện chạy bộ',category:'Huy chương sự kiện chạy bộ'},{label:'Móc khóa cao su',category:'Móc khóa cao su'},{label:'Móc khóa hợp kim',category:'Móc khóa hợp kim'},{label:'Móc khóa Tết 2025',category:'Móc khóa tết 2025'},{label:'Móc khóa Tết 2026',category:'Móc khóa tết 2026'},{label:'Móc khóa Tết 2027',category:'Móc khóa tết 2027'},{label:'Móc khóa Tết 2030',category:'Móc khóa tết 2030'},{label:'Khác',category:'Khác'} ]; // 100251: Danh mục mẫu

function renderGroups(){ $('#groupBar').innerHTML = GROUPS.map(g=>`<button class="group-chip ${state.group===g?'active':''}" data-action="set-group" data-val="${esc(g)}"><img src="${esc(GROUP_ICONS[g]||GROUP_ICONS['KHÁC'])}" alt=""/><span>${esc(g)}</span></button>`).join(''); } // 100252: Render group chips
function renderCategories(){ $('#categoryGrid').innerHTML = CAT_CONFIG.map(c=>`<a class="category-item ${state.category===c.category?'active':''}" data-action="set-category" data-val="${esc(c.category)}"><span class="icon"><img src="https://drive.google.com/thumbnail?id=1e9N6rgsTP5vYtKl4Lwq801dfteYLbx_F&sz=w200" alt=""></span><span class="label">${esc(c.label)}</span></a>`).join(''); } // 100253: Render category grid

function productCard(it){ products[it.id]=it; const gift=firstLink(it.imageClick); return `<div class=\"col\"><div class=\"cardx\"><div class=\"position-relative\"><a href=\"${esc(it.linkFull||it.img||'#')}\" target=\"_blank\" rel=\"noopener\"><img class=\"thumb\" src=\"${esc(it.img)}\" alt=\"${esc(it.id)}\" onerror=\"this.src='https://placehold.co/600x400'\"/></a>${it.note?`<span class='note'>${esc(it.note)}</span>`:''}</div><div class=\"meta\"><div class=\"id\">${esc(it.id)}</div><div class=\"details\">${esc(it.details||'')}</div>${it.type?`<div class=\"type\">${esc(it.type)}</div>`:''}<div class=\"price\">${fmtVND(it.price)}</div><div class=\"d-flex align-items-center justify-content-between\">${gift?`<a class=\"btn-gift\" href=\"${esc(gift)}\" target=\"_blank\" rel=\"noopener\">${esc(it.loai||'Nhận quà')}</a>`:'<span></span>'}<button class=\"add-btn\" data-action=\"add-to-cart\" data-id=\"${esc(it.id)}\">+</button></div></div></div></div>`; } // 100254: Tạo thẻ sản phẩm HTML

function renderPagination(total){ const totalPages=Math.max(1,Math.ceil((total||0)/(state.pageSize||1))); state.totalPages=totalPages; const block=w=>`<div class='d-inline-flex align-items-center gap-1' data-where='${w}'><button class='btn btn-sm btn-outline-secondary' data-action='page-prev' ${state.page<=1?'disabled':''}>&lsaquo;</button><select class='form-select form-select-sm page-select' style='width:auto'>${Array.from({length:totalPages},(_,i)=>{const p=i+1;return `<option value='${p}' ${p===state.page?'selected':''}>Trang ${p}/${totalPages}</option>`}).join('')}</select><button class='btn btn-sm btn-outline-secondary' data-action='page-next' ${state.page>=totalPages?'disabled':''}>&rsaquo;</button></div>`; $('#pagerTop').innerHTML=block('top'); $('#pagerBottom').innerHTML=block('bottom'); $$('#pagerTop .page-select, #pagerBottom .page-select').forEach(sel=> sel.onchange = e=>{ state.page=+e.target.value||1; fetchPage(); }); } // 100255: Render phân trang

// ==== Xưởng đề xuất ==== // 100256: API xưởng
async function fetchXuong(){ try{ const qs=new URLSearchParams({action:'ads',q:state.q,group:state.group,type:state.type,loai:state.loai,note:state.note,category:state.category}); const r=await fetch(API_URL+'?'+qs.toString(),{mode:'cors'}); const j=await r.json(); renderXuong(j.items||[]); }catch{ renderXuong([]); } } // 100257: Gọi API ads và render
function renderXuong(items){ const list=$('#xuongList'), badge=$('#xuongCount'), empty=$('#xuongEmpty'); const data=(Array.isArray(items)&&items.length)?items:[{title:'Xưởng A – UV Kim Loại',desc:'Nhận in UV badge/huy hiệu số lượng nhỏ',url:'#',img:'https://picsum.photos/96?1'},{title:'Xưởng B – Đúc Hợp Kim',desc:'Huy chương 3D, mạ vàng/niken',url:'#',img:'https://picsum.photos/96?2'}]; list.innerHTML=data.map(it=>`<a class=\"link-preview text-decoration-none\" href=\"${esc(it.url||'#')}\" target=\"_blank\" rel=\"noopener\"><img class=\"thumb\" src=\"${esc(safeImg(it.img))}\" alt=\"\"><div class=\"flex-grow-1 small\"><div class=\"title\">${esc(it.title||'Xưởng đề xuất')}</div>${it.desc?`<div class=\\"text-muted\\" style=\\"font-size:12px\\">${esc(it.desc)}</div>`:''}</div></a>`).join(''); const n=data.length; if(badge){badge.textContent=n; badge.style.display=n?'inline-block':'none';} if(empty){empty.style.display=n?'none':'block';} } // 100258: Render danh sách xưởng

// ==== Tải dữ liệu sản phẩm ==== // 100259: Fetch list
let _timer=0; const DEBOUNCE=160; function fetchPage(){ clearTimeout(_timer); _timer=setTimeout(_doFetch,DEBOUNCE); } // 100260: Debounce fetch
async function _doFetch(){ const qs=new URLSearchParams({action:'list',page:state.page,pageSize:state.pageSize,q:state.q,group:state.group,type:state.type,loai:state.loai,note:state.note,category:state.category}); try{ const res=await fetch(API_URL+'?'+qs.toString(),{mode:'cors'}); const raw=await res.text(); let json; try{ json=JSON.parse(raw);}catch{ json=JSON.parse(raw.replace(/^\)\]\}'[^\n]*\n?/,'').replace(/^\uFEFF/,'').trim()); } const items=json.items||[]; const facets=json.facets||{}; const total=json.total||items.length; $('#productGrid').innerHTML=items.length?items.map(productCard).join(''):'<div class="text-muted">Không có dữ liệu.</div>'; $('#totalCount').textContent=Number(total).toLocaleString('vi-VN'); renderPagination(total); buildFilterBox('typeBox',facets.types||[],'type'); buildFilterBox('loaiBox',facets.loais||[],'loai'); buildFilterBox('noteBox',facets.notes||[],'note'); buildFilterBox('brandBox',facets.categories||[],'category'); fetchXuong(); }catch(err){ $('#errbox').style.display='block'; $('#errbox').textContent='[ERROR] Không tải được dữ liệu.'; } } // 100261: Gọi API & render grid
function buildFilterBox(id,items,field){ const box=document.getElementById(id); if(!box) return; box.classList.add('d-flex','flex-wrap','gap-2'); box.innerHTML=(items||[]).map(val=>`<button class='btn btn-sm ${state[field]===val?'btn-success':'btn-outline-secondary'}' data-action='set-filter' data-field='${field}' data-val='${esc(val)}'>${esc(val)}</button>`).join(''); } // 100262: Tạo các nút filter

// ==== Giỏ hàng ==== // 100263: Logic cart
function updateCart(){ const list=$('#cartList'); let total=0; list.innerHTML=cart.map(it=>{ const sub=it.qty*(+it.price||0); total+=sub; return `<div class='d-flex align-items-center gap-2 border-bottom py-2'><img src='${esc(it.img)}' alt='' style='width:50px;height:50px;object-fit:cover;border-radius:6px;border:1px solid #eee'><div class='flex-grow-1'><div class='fw-semibold small text-truncate'>${esc(it.details||it.id)}</div><div class='text-muted small'>${fmtVND(it.price)}</div></div><div class='d-flex align-items-center gap-1'><button class='btn btn-sm btn-outline-secondary' data-action='qty' data-id='${esc(it.id)}' data-delta='-1'>-</button><span>${it.qty}</span><button class='btn btn-sm btn-outline-secondary' data-action='qty' data-id='${esc(it.id)}' data-delta='1'>+</button></div><div style='min-width:90px;text-align:right' class='small'>${fmtVND(sub)}</div><button class='btn btn-sm btn-link text-danger' data-action='remove' data-id='${esc(it.id)}'>&times;</button></div>`; }).join(''); $('#cartTotal').textContent=fmtVND(total); const count=cart.reduce((a,b)=>a+b.qty,0); const b=$('#cartFabCount'); b.textContent=count; b.style.display=count?'inline-block':'none'; } // 100264: Cập nhật UI giỏ
function addToCartById(id){ const it=products[id]; if(!it) return; const f=cart.find(p=>p.id===id); if(f) f.qty++; else cart.push({...it,qty:1}); updateCart(); cartCanvas.toggle(); } // 100265: Thêm vào giỏ và mở panel
function changeQty(id,delta){ const it=cart.find(p=>p.id===id); if(!it) return; it.qty+=delta; if(it.qty<=0) cart.splice(cart.indexOf(it),1); updateCart(); } // 100266: Tăng/giảm số lượng
function removeItem(id){ const i=cart.findIndex(p=>p.id===id); if(i>=0) cart.splice(i,1); updateCart(); } // 100267: Xóa item khỏi giỏ
async function submitOrder(){ if(!cart.length){ alert('Giỏ hàng trống!'); return; } const name=$('#buyerName').value.trim(), email=$('#buyerEmail').value.trim(), phone=$('#buyerPhone').value.trim(), address=$('#buyerAddress').value.trim(), note=$('#buyerNote').value.trim(); if(!name||!email||!phone||!address){ alert('Vui lòng nhập đầy đủ thông tin!'); return; } const order={ customer:{name,email,phone,address,note}, items:cart.map(({id,details,type,price,qty,img,linkFull,group,loai,category,note})=>({id,details,type,price,qty,img,linkFull,group,loai,category,note})), total:cart.reduce((a,b)=>a+b.qty*(+b.price||0),0) }; try{ const r=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({action:'order',data:order})}); const j=await r.json(); if(j&&(j.ok||j.success)){ alert('Đã gửi đơn hàng thành công!'); cart.length=0; updateCart(); } else { alert('Gửi đơn hàng thất bại.'); } }catch{ alert('Không thể gửi đơn hàng. Kiểm tra API_URL.'); } } // 100268: Gửi đơn hàng lên API

// ==== Sự kiện ==== // 100269: Event delegation
const cartCanvas=bootstrap.Offcanvas.getOrCreateInstance(document.getElementById('cartCanvas')); // 100270: Tạo offcanvas giỏ
const filterCanvas=bootstrap.Offcanvas.getOrCreateInstance(document.getElementById('filterPanel')); // 100271: Tạo offcanvas lọc
const suppliersCanvas=bootstrap.Offcanvas.getOrCreateInstance(document.getElementById('suppliersCanvas')); // 100272: Tạo offcanvas xưởng

document.addEventListener('click',e=>{ const el=e.target; if(el.matches('#searchBtn')){ state.q=$('#searchBox').value.trim(); state.page=1; fetchPage(); } if(el.matches('[data-action="page-prev"]')){ if(state.page>1){ state.page--; fetchPage(); } } if(el.matches('[data-action="page-next"]')){ if(state.page<state.totalPages){ state.page++; fetchPage(); } } if(el.matches('[data-action="set-group"]')){ state.group=el.dataset.val||''; state.page=1; renderGroups(); fetchPage(); } if(el.closest('[data-action="set-category"]')){ const x=el.closest('[data-action="set-category"]'); state.category=x.dataset.val||''; state.page=1; renderCategories(); fetchPage(); } if(el.matches('[data-action="set-filter"]')){ const f=el.dataset.field; state[f]=el.dataset.val||''; state.page=1; fetchPage(); } if(el.matches('[data-action="add-to-cart"]')){ addToCartById(el.dataset.id); } if(el.matches('[data-action="qty"]')){ changeQty(el.dataset.id, +(el.dataset.delta||0)); } if(el.matches('[data-action="remove"]')){ removeItem(el.dataset.id); } if(el.matches('#clearFilters')){ Object.assign(state,{q:'',group:'',type:'',loai:'',note:'',category:'',page:1}); $('#searchBox').value=''; renderGroups(); renderCategories(); fetchPage(); } if(el.matches('#submitOrderBtn')){ submitOrder(); } if(el.matches('#cartFab')){ cartCanvas.toggle(); } if(el.matches('#filterFab')){ filterCanvas.toggle(); } if(el.matches('#suppliersFab')){ suppliersCanvas.show(); } }); // 100273: Lắng nghe click và điều hướng hành vi

$('#searchBox').addEventListener('keydown',e=>{ if(e.key==='Enter'){ e.preventDefault(); $('#searchBtn').click(); }}); // 100274: Enter để tìm

// ==== Khởi tạo ==== // 100275: Chạy lúc load
$('#zaloFab').href=ZALO_URL; $('#xuongContactBtn').href=ZALO_URL; // 100276: Gán link Zalo
$('#logoLink').addEventListener('click', e=>{ e.preventDefault(); window.scrollTo({top:0,behavior:'smooth'}); setTimeout(()=>location.reload(),150); }); // 100277: Click logo scroll lên & refresh nhẹ
renderGroups(); renderCategories(); fetchPage(); // 100278: Render ban đầu và tải dữ liệu
</script> <!-- 100279: Kết thúc script -->
</body> <!-- 100280: Kết thúc body -->
</html> <!-- 100281: Kết thúc tài liệu -->
