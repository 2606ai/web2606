<!doctype html> <!-- 100001: Khai b√°o doctype HTML5 -->
<html lang="vi"> <!-- 100002: Th·∫ª html ng√¥n ng·ªØ ti·∫øng Vi·ªát -->
<head> <!-- 100003: Ph·∫ßn ƒë·∫ßu t√†i li·ªáu -->
<meta charset="utf-8"> <!-- 100004: B·∫£ng m√£ UTF-8 -->
<meta name="viewport" content="width=device-width, initial-scale=1"/> <!-- 100005: Responsive viewport -->
<title>2606AI ‚Äì Theme Xanh L√°</title> <!-- 100006: Ti√™u ƒë·ªÅ trang -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"> <!-- 100007: CSS Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet"> <!-- 100008: Bootstrap Icons -->
<style> /* 100009: B·∫Øt ƒë·∫ßu CSS n·ªôi tuy·∫øn */
/* ===== 990001: PATCH ‚Äì KH·ªöP GIAO DI·ªÜN ·∫¢NH ===== */

/* --- NH√ìM L·ªöN (4 √¥ c√≥ icon tr√≤n + ch·ªØ xanh) --- */
.group-bar{                     /* 990010 */
  display:grid !important;
  grid-template-columns:repeat(4,1fr);
  gap:14px !important;
  overflow:visible !important;
}
#groupBar .group-chip{          /* 990020 */
  display:flex !important; flex-direction:column; align-items:center; justify-content:center;
  min-height:120px; padding:16px 12px;
  background:#fff !important; border:1px solid #e4efe4 !important; border-radius:16px !important;
  box-shadow:0 1px 2px rgba(0,0,0,.04);
  white-space:normal !important; text-align:center; gap:10px;
  transition:transform .12s, box-shadow .12s, border-color .12s;
}
#groupBar .group-chip .chip-icon,     /* n·∫øu c√≥ b·ªçc icon */
#groupBar .group-chip .icon,
#groupBar .group-chip img{            /* 990030 */
  width:56px; height:56px; border-radius:50%;
  background:#edf7ed; display:flex; align-items:center; justify-content:center;
  box-shadow:inset 0 0 0 1px rgba(76,175,80,.18);
  object-fit:contain;
}
#groupBar .group-chip span,           /* nh√£n */
#groupBar .group-chip{ color:#1b5e20 !important; font-weight:800; }
#groupBar .group-chip:hover{          /* 990040 */
  transform:translateY(-2px);
  box-shadow:0 8px 22px rgba(46,125,50,.12);
  border-color:#cfe6cf !important;
}
#groupBar .group-chip.active{         /* 990050 */
  background:#f0f7f0 !important;
  border-color:#a5d6a7 !important;
  color:#145214 !important;
}

/* Responsive c·ªôt nh√≥m */
@media (max-width:1200px){ .group-bar{grid-template-columns:repeat(3,1fr)} }   /* 990060 */
@media (max-width:992px){  .group-bar{grid-template-columns:repeat(2,1fr)} }
@media (max-width:576px){  .group-bar{grid-template-columns:1fr} }

/* --- DANH M·ª§C NH·ªé (2 h√†ng icon h·ªôp bo tr√≤n + link xanh) --- */
#categoryGrid.category-grid{           /* 990070 */
  display:grid; grid-template-columns:repeat(6,1fr); gap:14px;
}
@media (max-width:1200px){#categoryGrid.category-grid{grid-template-columns:repeat(5,1fr)}}
@media (max-width:992px){ #categoryGrid.category-grid{grid-template-columns:repeat(4,1fr)}}
@media (max-width:768px){ #categoryGrid.category-grid{grid-template-columns:repeat(3,1fr)}}
@media (max-width:576px){ #categoryGrid.category-grid{grid-template-columns:repeat(2,1fr)}}

#categoryGrid .category-item{          /* 990080 */
  background:#fff; border:1px solid #e8efe8; border-radius:14px;
  padding:12px 10px; text-align:center; transition:.12s;
}
#categoryGrid .category-item .icon{    /* h·ªôp icon */
  width:64px; height:64px; margin:0 auto 8px; border-radius:18px;
  background:#edf7ed; display:flex; align-items:center; justify-content:center;
  box-shadow:inset 0 0 0 1px rgba(76,175,80,.18);
}
#categoryGrid .category-item .icon img{ width:38px; height:38px; object-fit:contain }
#categoryGrid .category-item span{     /* nh√£n */
  font-size:12.5px; line-height:1.25; color:#1b5e20; display:block;
}
#categoryGrid .category-item:hover{ transform:translateY(-2px); box-shadow:0 8px 20px rgba(46,125,50,.10) }
#categoryGrid .category-item.active{ border-color:#a5d6a7; background:#f3faf3 }
#categoryGrid .category-item.active span{ color:#145214; font-weight:700 }

/* --- X∆Ø·ªûNG ƒê·ªÄ XU·∫§T (khung n√©t ƒë·ª©t + pill v√†ng) --- */
#xuongBox.sidebar-box{                 /* 990100 */
  border:1px dashed #a5d6a7 !important; border-radius:14px; background:#fff;
}
#xuongBox .btn{ border-radius:999px; padding:6px 12px; font-weight:700 }
#xuongList .link-preview{ transition:transform .12s, box-shadow .12s }
#xuongList .link-preview:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(46,125,50,.08) }

/* --- CARD S·∫¢N PH·∫®M (n√∫t xanh, badge g√≥c) --- */
.cardx{ border-radius:14px; box-shadow:0 1px 2px rgba(0,0,0,.06) }            /* 990120 */
.cardx .meta{ display:flex; flex-direction:column; gap:6px; flex:1 }
.cardx .id{ color:#2e7d32; font-weight:800 }
.cardx .type{ background:#e7f3e8; color:#1b5e20; font-weight:700; border-radius:12px; padding:2px 6px; display:inline-block }
.cardx .details{ display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:2; overflow:hidden }
.cardx .price{ margin-top:auto; font-weight:700; color:#c62828 }
.cardx .meta-actions{ margin-top:6px }

.cardx .btn-gift{                                                           /* 990130 */
  background:#fff; color:#2e7d32; border:1.5px solid #2e7d32; border-radius:999px;
  padding:6px 14px; font-weight:700;
}
.cardx .btn-gift:hover{ background:#2e7d32; color:#fff }
.add-btn{ background:#2e7d32; color:#fff; border:none } .add-btn:hover{ background:#1b5e20 }

/* badge ch√¢n trang ·∫£nh */
.cardx .note{ position:absolute; top:8px; left:8px; padding:2px 8px; border-radius:999px; font-size:11px; font-weight:700; color:#fff }
.cardx .note.new{ background:#2e7d32 } .cardx .note.sale{ background:#ef6c00 } .cardx .note.hot{ background:#c62828 }

/* --- PAGER + ‚ÄúT√¨m th·∫•y / X√≥a b·ªô l·ªçc‚Äù c√πng 1 d√≤ng --- */
.stats-row{ align-items:center; gap:8px; flex-wrap:nowrap; overflow-x:auto }  /* 990140 */
#pagerTop{ margin-left:auto; display:flex; align-items:center; gap:6px; white-space:nowrap }
#pagerTop .btn,#pagerBottom .btn{ padding:.35rem .6rem; font-size:.875rem; min-width:40px; border-radius:.5rem }

/* --- HERO banner: bo tr√≤n, b√≥ng nh·∫π --- */
.hero .mini img,.hero .main img{ border-radius:14px }                         /* 990150 */
.hero .carousel{ border-radius:14px; box-shadow:0 6px 18px rgba(0,0,0,.06) }
/* =========================
   PATCH ‚Äì KH·ªöP GIAO DI·ªÜN B·∫†N G·ª¨I  (ƒë·∫∑t ·ªü CU·ªêI FILE)
   ========================= */

/* ===== Nh√≥m l·ªõn (4 √¥ tr·∫Øng, icon tr√≤n xanh nh·∫°t, ti√™u ƒë·ªÅ xanh) ===== */
/* 600101 */ .group-bar{display:grid !important;grid-template-columns:repeat(4,1fr);gap:14px !important;overflow:visible !important}
/* 600102 */ #groupBar .group-chip{
  display:flex !important;flex-direction:column;align-items:center;justify-content:center;
  min-height:120px;padding:16px 12px;background:#fff !important;border:1px solid #e6efe6 !important;border-radius:14px !important;
  box-shadow:none !important;white-space:normal !important;text-align:center;gap:12px;transition:transform .12s,box-shadow .12s,border-color .12s;
}
/* 600103 */ #groupBar .group-chip .chip-icon,#groupBar .group-chip .icon,#groupBar .group-chip img{
  width:56px;height:56px;border-radius:50%;background:#edf7ed;display:flex;align-items:center;justify-content:center;
  box-shadow:inset 0 0 0 1px rgba(76,175,80,.18);object-fit:contain;
}
/* 600104 */ #groupBar .group-chip span,#groupBar .group-chip{color:#155b1a !important;font-weight:800 !important;text-transform:none !important}
/* 600105 */ #groupBar .group-chip:hover{transform:translateY(-2px);border-color:#cfe2cf !important;box-shadow:0 8px 22px rgba(46,125,50,.10) !important}
/* 600106 */ #groupBar .group-chip.active{background:#f3faf3 !important;border-color:#a5d6a7 !important;color:#0f4b14 !important}

/* Responsive c·ªôt nh√≥m */
/* 600111 */ @media (max-width:1200px){.group-bar{grid-template-columns:repeat(3,1fr)}} 
/* 600112 */ @media (max-width:992px){ .group-bar{grid-template-columns:repeat(2,1fr)}}
/* 600113 */ @media (max-width:576px){ .group-bar{grid-template-columns:1fr}}

/* ===== Danh m·ª•c nh·ªè (2 h√†ng, √¥ tr·∫Øng vi·ªÅn m·∫£nh, icon h·ªôp bo tr√≤n) ===== */
/* 600121 */ #categoryGrid.category-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:14px !important}
/* 600122 */ @media (max-width:1200px){#categoryGrid.category-grid{grid-template-columns:repeat(5,1fr)}}
@media (max-width:992px){#categoryGrid.category-grid{grid-template-columns:repeat(4,1fr)}}
@media (max-width:768px){#categoryGrid.category-grid{grid-template-columns:repeat(3,1fr)}}
@media (max-width:576px){#categoryGrid.category-grid{grid-template-columns:repeat(2,1fr)}}
/* 600123 */ #categoryGrid .category-item{background:#fff !important;border:1px solid #e8efe8 !important;border-radius:14px !important;padding:12px 10px !important;text-align:center;transition:.12s}
/* 600124 */ #categoryGrid .category-item .icon{width:64px;height:64px;margin:0 auto 8px;border-radius:18px;background:#edf7ed;display:flex;align-items:center;justify-content:center;box-shadow:inset 0 0 0 1px rgba(76,175,80,.18)}
/* 600125 */ #categoryGrid .category-item .icon img{width:38px;height:38px;object-fit:contain}
/* 600126 */ #categoryGrid .category-item span{font-size:12.5px;line-height:1.25;color:#173b1b;display:block}
/* 600127 */ #categoryGrid .category-item:hover{transform:translateY(-2px);box-shadow:0 8px 18px rgba(46,125,50,.10)}
/* 600128 */ #categoryGrid .category-item.active{border-color:#a5d6a7 !important;background:#f3faf3 !important}
#categoryGrid .category-item.active span{color:#0f4b14 !important;font-weight:700 !important}

/* ===== X∆∞·ªüng ƒë·ªÅ xu·∫•t (khung n√©t ƒë·ª©t + pill v√†ng b√™n ph·∫£i) ===== */
/* 600131 */ #xuongBox.sidebar-box{border:1px dashed #a5d6a7 !important;border-radius:14px !important;background:#fff !important}
/* 600132 */ #xuongList .link-preview{display:flex;gap:10px;background:#fff;border:1px solid #e3f2fd;border-radius:10px;padding:10px;transition:transform .12s, box-shadow .12s}
#xuongList .link-preview:hover{transform:translateY(-1px);box-shadow:0 10px 20px rgba(46,125,50,.08)}
#xuongList .thumb{width:44px;height:44px;border-radius:8px;object-fit:cover;background:#f1f4ff}
#xuongList .title{font-weight:700;color:#2e7d32}
#xuongList .desc{font-size:12px;color:#6b7280}
#xuongList .site{font-size:12px;color:#2e7d32}

/* ===== Card s·∫£n ph·∫©m (ƒë·ªÅu ch√¢n, n√∫t xanh ph·∫≥ng, badge g√≥c) ===== */
/* 600141 */ .cardx{border-radius:14px !important;box-shadow:0 1px 2px rgba(0,0,0,.06)}
.cardx .meta{display:flex;flex-direction:column;gap:6px;flex:1}
.cardx .id{color:#2e7d32;font-weight:800}
.cardx .type{background:#e7f3e8;color:#1b5e20;border-radius:12px;padding:2px 6px;font-weight:700;display:inline-block}
.cardx .details{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}
.cardx .price{margin-top:auto;font-weight:700;color:#c62828}
.cardx .meta-actions{margin-top:6px}
/* 600148 */ .cardx .btn-gift{background:#fff !important;color:#2e7d32 !important;border:1.5px solid #2e7d32 !important;border-radius:999px;padding:6px 14px;font-weight:700}
.cardx .btn-gift:hover{background:#2e7d32 !important;color:#fff !important}
.add-btn{background:#2e7d32 !important;color:#fff !important;border:none !important}
.add-btn:hover{background:#1b5e20 !important}
/* 600149 */ .cardx .note{position:absolute;top:8px;left:8px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:700;color:#fff}
.cardx .note.new{background:#2e7d32}.cardx .note.sale{background:#ef6c00}.cardx .note.hot{background:#c62828}

/* ===== H√†ng th·ªëng k√™ + ph√¢n trang (1 d√≤ng s√°t nhau) ===== */
/* 600151 */ .stats-row{align-items:center;gap:8px;flex-wrap:nowrap;overflow-x:auto}
#pagerTop{margin-left:auto;display:flex;align-items:center;gap:6px;white-space:nowrap}
#pagerTop .btn,#pagerBottom .btn{padding:.35rem .6rem;font-size:.875rem;min-width:40px;border-radius:.5rem}

/* ===== Hero banner (bo tr√≤n nh∆∞ ·∫£nh) ===== */
/* 600161 */ .hero .mini img,.hero .main img{border-radius:14px}
.hero .carousel{border-radius:14px;box-shadow:0 6px 18px rgba(0,0,0,.06)}

</style> <!-- 100087: K·∫øt th√∫c CSS -->
</head> <!-- 100088: K·∫øt th√∫c head -->
<body> <!-- 100089: B·∫Øt ƒë·∫ßu body -->
<header class="site-header"> <!-- 100090: Header c·ªë ƒë·ªãnh -->
  <div class="wrap"> <!-- 100091: Container header -->
    <a id="logoLink" href="#" class="d-flex align-items-center text-decoration-none"> <!-- 100092: Link logo v·ªÅ ƒë·∫ßu trang -->
      <img src="https://drive.google.com/thumbnail?id=1e9N6rgsTP5vYtKl4Lwq801dfteYLbx_F&sz=w160" class="logo" alt="2606AI"> <!-- 100093: ·∫¢nh logo -->
    </a> <!-- 100094: H·∫øt link logo -->
    <form class="header-search d-flex gap-2 m-0 flex-grow-1" onsubmit="return false;"> <!-- 100095: Form t√¨m ki·∫øm -->
      <div class="input-group w-100"> <!-- 100096: Nh√≥m input + n√∫t -->
        <input id="searchBox" class="form-control" placeholder="T√¨m s·∫£n ph·∫©m... (ID, m√¥ t·∫£)"> <!-- 100097: √î nh·∫≠p t·ª´ kh√≥a -->
        <button id="searchBtn" class="btn" type="button">T√¨m</button> <!-- 100098: N√∫t t√¨m ki·∫øm -->
      </div> <!-- 100099: H·∫øt nh√≥m input -->
    </form> <!-- 100100: H·∫øt form t√¨m -->
  </div> <!-- 100101: H·∫øt header wrap -->
</header> <!-- 100102: K·∫øt th√∫c header -->

<div class="top-banner" role="region" aria-label="Th√¥ng b√°o"> <!-- 100103: Thanh th√¥ng b√°o -->
  <div class="wrap"><div class="marquee">Ngu·ªìn thu c·ªßa 2606AI.VN ƒë·∫øn t·ª´ qu·∫£ng c√°o ‚Ä¢ T·ª± tin s·∫£n xu·∫•t m·ªçi s·∫£n ph·∫©m ‚Ä¢ D·ªãch v·ª• h·ªó tr·ª£ xanh</div></div> <!-- 100104: N·ªôi dung ch·∫°y -->
</div> <!-- 100105: K·∫øt th√∫c top-banner -->

<div class="container-fluid my-3 wrap"> <!-- 100106: Kh·ªëi n·ªôi dung ch√≠nh -->
  <div class="row g-3"> <!-- 100107: L∆∞·ªõi 2 c·ªôt -->
    <aside class="col-lg-3 col-md-4"> <!-- 100108: C·ªôt tr√°i sidebar -->
      <div class="sidebar-box benefits"> <!-- 100109: H·ªôp d·ªãch v·ª• -->
        <h6>D·ªãch v·ª• h·ªó tr·ª£</h6> <!-- 100110: Ti√™u ƒë·ªÅ d·ªãch v·ª• -->
        <div class="item"><div class="ic">üí¨</div><div><div class="ttl">T∆∞ v·∫•n s·∫£n xu·∫•t</div><div class="sub">Mi·ªÖn ph√≠, nhanh</div></div></div> <!-- 100111: M·ª•c d·ªãch v·ª• 1 -->
        <div class="item"><div class="ic">üé®</div><div><div class="ttl">Thi·∫øt k·∫ø 2D/3D</div><div class="sub">Mi·ªÖn ph√≠</div></div></div> <!-- 100112: M·ª•c d·ªãch v·ª• 2 -->
        <div class="item"><div class="ic">üì¶</div><div><div class="ttl">H·∫≠u c·∫ßn ‚Äì ƒë√≥ng g√≥i</div><div class="sub">C√≥ ph√≠</div></div></div> <!-- 100113: M·ª•c d·ªãch v·ª• 3 -->
        <div class="item"><div class="ic">üõ°Ô∏è</div><div><div class="ttl">H·ªó tr·ª£ tranh ch·∫•p</div><div class="sub">C√≥ ph√≠</div></div></div> <!-- 100114: M·ª•c d·ªãch v·ª• 4 -->
      </div> <!-- 100115: H·∫øt h·ªôp d·ªãch v·ª• -->

      <div id="xuongBox" class="sidebar-box xuong-box"> <!-- 100116: H·ªôp x∆∞·ªüng ƒë·ªÅ xu·∫•t -->
        <h6 class="d-flex align-items-center justify-content-between"> <!-- 100117: Ti√™u ƒë·ªÅ x∆∞·ªüng -->
          <span>X∆∞·ªüng ƒë·ªÅ xu·∫•t <span id="xuongCount" class="badge bg-success" style="display:none">0</span></span> <!-- 100118: Badge s·ªë x∆∞·ªüng -->
          <a id="xuongContactBtn" href="#" target="_blank" rel="noopener" class="btn btn-sm fw-bold" style="border-radius:999px;background:#ffca28;color:#0d47a1;border:none">üì¢ Li√™n h·ªá qu·∫£ng c√°o</a> <!-- 100119: N√∫t li√™n h·ªá -->
        </h6> <!-- 100120: H·∫øt ti√™u ƒë·ªÅ x∆∞·ªüng -->
        <div id="xuongList" class="d-flex flex-column gap-2"></div> <!-- 100121: Danh s√°ch x∆∞·ªüng -->
        <div id="xuongEmpty" class="small text-muted">ƒêang t·∫£i d·ªØ li·ªáu‚Ä¶</div> <!-- 100122: Tr·∫°ng th√°i r·ªóng -->
      </div> <!-- 100123: H·∫øt h·ªôp x∆∞·ªüng -->
    </aside> <!-- 100124: K·∫øt th√∫c c·ªôt tr√°i -->

    <main class="col-lg-9 col-md-8"> <!-- 100125: C·ªôt ph·∫£i n·ªôi dung ch√≠nh -->
      <div class="row g-2 mb-2"> <!-- 100126: H√†ng hero -->
        <div class="col-md-8"> <!-- 100127: C·ªôt banner ch√≠nh -->
          <div id="heroMain" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000"> <!-- 100128: Carousel hero -->
            <div class="carousel-inner"> <!-- 100129: V√πng slide -->
              <div class="carousel-item active"><img class="d-block w-100" src="https://picsum.photos/1200/300?random=11" alt="Banner 1"></div> <!-- 100130: Slide 1 -->
              <div class="carousel-item"><img class="d-block w-100" src="https://picsum.photos/1200/300?random=12" alt="Banner 2"></div> <!-- 100131: Slide 2 -->
              <div class="carousel-item"><img class="d-block w-100" src="https://picsum.photos/1200/300?random=13" alt="Banner 3"></div> <!-- 100132: Slide 3 -->
            </div> <!-- 100133: H·∫øt slide -->
            <button class="carousel-control-prev" type="button" data-bs-target="#heroMain" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button> <!-- 100134: N√∫t prev -->
            <button class="carousel-control-next" type="button" data-bs-target="#heroMain" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button> <!-- 100135: N√∫t next -->
          </div> <!-- 100136: K·∫øt th√∫c carousel -->
        </div> <!-- 100137: H·∫øt c·ªôt banner ch√≠nh -->
        <div class="col-md-4 d-flex flex-column gap-2"> <!-- 100138: C·ªôt banner ph·ª• -->
          <img src="https://picsum.photos/600/145?random=21" alt="promo"/> <!-- 100139: Banner ph·ª• 1 -->
          <img src="https://picsum.photos/600/145?random=22" alt="promo"/> <!-- 100140: Banner ph·ª• 2 -->
        </div> <!-- 100141: H·∫øt c·ªôt banner ph·ª• -->
      </div> <!-- 100142: K·∫øt th√∫c h√†ng hero -->

      <section class="category-box mb-3"> <!-- 100143: Kh·ªëi nh√≥m + danh m·ª•c -->
        <div id="groupBar" class="group-bar"></div> <!-- 100144: Thanh group -->
        <div class="mt-2"><div id="categoryGrid" class="category-grid"></div></div> <!-- 100145: L∆∞·ªõi danh m·ª•c -->
      </section> <!-- 100146: H·∫øt kh·ªëi category -->

      <div class="stats-row"> <!-- 100147: H√†ng th·ªëng k√™ + ph√¢n trang -->
        <div class="d-flex align-items-center gap-2 flex-wrap"> <!-- 100148: C·ª•m tr√°i -->
          <span>T√¨m th·∫•y</span> <!-- 100149: Nh√£n ƒë·∫øm -->
          <span id="totalCount" class="badge text-bg-success">0</span> <!-- 100150: S·ªë l∆∞·ª£ng t·ªïng -->
          <button id="clearFilters" class="btn btn-sm btn-outline-danger ms-2">X√≥a b·ªô l·ªçc</button> <!-- 100151: N√∫t x√≥a l·ªçc -->
        </div> <!-- 100152: H·∫øt c·ª•m tr√°i -->
        <div id="pagerTop" class="pager"></div> <!-- 100153: Pager tr√™n -->
      </div> <!-- 100154: K·∫øt th√∫c h√†ng th·ªëng k√™ -->

      <div id="productGrid" class="row row-cols-2 row-cols-md-3 row-cols-lg-6 g-2" aria-live="polite"></div> <!-- 100155: L∆∞·ªõi s·∫£n ph·∫©m -->
      <div id="pagerBottom" class="pager mt-3 text-end"></div> <!-- 100156: Pager d∆∞·ªõi -->

      <div class="my-3"> <!-- 100157: Qu·∫£ng c√°o cu·ªëi n·ªôi dung -->
        <img src="https://picsum.photos/1200/200?random=91" class="w-100 rounded-3 shadow-sm" alt="ads"/> <!-- 100158: ·∫¢nh ads -->
      </div> <!-- 100159: H·∫øt ads -->
    </main> <!-- 100160: K·∫øt th√∫c c·ªôt ph·∫£i -->
  </div> <!-- 100161: K·∫øt th√∫c row -->
</div> <!-- 100162: K·∫øt th√∫c container -->

<!-- Offcanvas: Cart --> <!-- 100163: B·∫£ng tr∆∞·ª£t gi·ªè h√†ng -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="cartCanvas"> <!-- 100164: Offcanvas gi·ªè h√†ng -->
  <div class="offcanvas-header"><h5 class="mb-0">Gi·ªè h√†ng</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button></div> <!-- 100165: Header offcanvas -->
  <div class="offcanvas-body"> <!-- 100166: Th√¢n offcanvas -->
    <div id="cartList"></div> <!-- 100167: Danh s√°ch item gi·ªè -->
    <div class="d-flex justify-content-between align-items-center border rounded-3 p-2 my-2 bg-light"><span>T·ªïng c·ªông</span><span id="cartTotal" class="fw-bold text-danger">0 ƒë</span></div> <!-- 100168: T·ªïng ti·ªÅn -->
    <input id="buyerName" class="form-control mb-2" placeholder="H·ªç v√† t√™n"> <!-- 100169: T√™n ng∆∞·ªùi mua -->
    <input id="buyerEmail" class="form-control mb-2" placeholder="Email"> <!-- 100170: Email -->
    <input id="buyerPhone" class="form-control mb-2" placeholder="S·ªë ƒëi·ªán tho·∫°i"> <!-- 100171: ƒêi·ªán tho·∫°i -->
    <input id="buyerAddress" class="form-control mb-2" placeholder="ƒê·ªãa ch·ªâ nh·∫≠n h√†ng"> <!-- 100172: ƒê·ªãa ch·ªâ -->
    <textarea id="buyerNote" class="form-control mb-2" placeholder="Ghi ch√∫"></textarea> <!-- 100173: Ghi ch√∫ -->
    <button class="btn btn-success w-100" id="submitOrderBtn">G·ª≠i ƒë∆°n h√†ng</button> <!-- 100174: N√∫t g·ª≠i ƒë∆°n -->
  </div> <!-- 100175: H·∫øt th√¢n offcanvas -->
</div> <!-- 100176: K·∫øt th√∫c offcanvas gi·ªè -->

<!-- Offcanvas: Filters --> <!-- 100177: B·∫£ng tr∆∞·ª£t b·ªô l·ªçc -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="filterPanel"> <!-- 100178: Offcanvas l·ªçc -->
  <div class="offcanvas-header"><h5 class="mb-0">B·ªô l·ªçc</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button></div> <!-- 100179: Header -->
  <div class="offcanvas-body"> <!-- 100180: Th√¢n -->
    <h6>TYPE</h6><div id="typeBox" class="mb-3"></div> <!-- 100181: Nh√≥m l·ªçc Type -->
    <h6>LO·∫†I</h6><div id="loaiBox" class="mb-3"></div> <!-- 100182: Nh√≥m l·ªçc Lo·∫°i -->
    <h6>CH√ö √ù</h6><div id="noteBox" class="mb-3"></div> <!-- 100183: Nh√≥m l·ªçc Ch√∫ √Ω -->
    <h6>DANH M·ª§C</h6><div id="brandBox" class="mb-3"></div> <!-- 100184: Nh√≥m l·ªçc Danh m·ª•c -->
  </div> <!-- 100185: H·∫øt th√¢n -->
</div> <!-- 100186: K·∫øt th√∫c offcanvas l·ªçc -->

<!-- Offcanvas: Suppliers --> <!-- 100187: B·∫£ng tr∆∞·ª£t x∆∞·ªüng -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="suppliersCanvas"> <!-- 100188: Offcanvas x∆∞·ªüng -->
  <div class="offcanvas-header"><h5 class="mb-0">Danh s√°ch x∆∞·ªüng</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button></div> <!-- 100189: Header -->
  <div class="offcanvas-body"><div id="suppliersList">Ch∆∞a c√≥ d·ªØ li·ªáu.</div></div> <!-- 100190: Th√¢n -->
</div> <!-- 100191: K·∫øt th√∫c offcanvas x∆∞·ªüng -->

<!-- FABs --> <!-- 100192: C√°c n√∫t n·ªïi -->
<button id="filterFab" class="fab" title="B·ªô l·ªçc">‚öôÔ∏è</button> <!-- 100193: FAB b·ªô l·ªçc -->
<button id="cartFab" class="fab" title="Gi·ªè h√†ng">üõí <span id="cartFabCount" class="badge">0</span></button> <!-- 100194: FAB gi·ªè h√†ng -->
<button id="suppliersFab" class="fab" title="X∆∞·ªüng">üè≠</button> <!-- 100195: FAB x∆∞·ªüng -->
<a id="zaloFab" class="fab" title="Zalo" href="#" target="_blank" rel="noopener">üí¨</a> <!-- 100196: FAB Zalo -->

<div id="errbox" role="alert" aria-live="assertive"></div> <!-- 100197: H·ªôp l·ªói n·ªïi -->

<footer class="mt-4 py-4"> <!-- 100198: Footer -->
  <div class="wrap"> <!-- 100199: Container footer -->
    <div class="row g-4"> <!-- 100200: L∆∞·ªõi 4 c·ªôt footer -->
      <div class="col-md-3 text-center"> <!-- 100201: C·ªôt logo -->
        <img src="https://drive.google.com/thumbnail?id=1e9N6rgsTP5vYtKl4Lwq801dfteYLbx_F&sz=w120" class="mb-2" alt="logo"> <!-- 100202: ·∫¢nh logo footer -->
        <p class="small">H·ªó tr·ª£ s·∫£n xu·∫•t ·∫•n ph·∫©m th∆∞∆°ng hi·ªáu.</p> <!-- 100203: M√¥ t·∫£ -->
      </div> <!-- 100204: H·∫øt c·ªôt logo -->
      <div class="col-md-3"> <!-- 100205: C·ªôt li√™n k·∫øt nhanh -->
        <h6 class="accent">Li√™n k·∫øt nhanh</h6> <!-- 100206: Ti√™u ƒë·ªÅ -->
        <ul class="list-unstyled small"> <!-- 100207: Danh s√°ch -->
          <li>V·ªÅ ch√∫ng t√¥i</li> <!-- 100208: Item -->
          <li>Danh m·ª•c</li> <!-- 100209: Item -->
          <li>B√°o gi√° nhanh</li> <!-- 100210: Item -->
        </ul> <!-- 100211: H·∫øt danh s√°ch -->
      </div> <!-- 100212: H·∫øt c·ªôt li√™n k·∫øt nhanh -->
      <div class="col-md-3"> <!-- 100213: C·ªôt ch√≠nh s√°ch -->
        <h6 class="accent">Ch√≠nh s√°ch</h6> <!-- 100214: Ti√™u ƒë·ªÅ -->
        <ul class="list-unstyled small"> <!-- 100215: Danh s√°ch -->
          <li>V·∫≠n chuy·ªÉn</li> <!-- 100216: Item -->
          <li>ƒê·ªïi tr·∫£</li> <!-- 100217: Item -->
          <li>B·∫£o m·∫≠t</li> <!-- 100218: Item -->
        </ul> <!-- 100219: H·∫øt danh s√°ch -->
      </div> <!-- 100220: H·∫øt c·ªôt ch√≠nh s√°ch -->
      <div class="col-md-3 small"> <!-- 100221: C·ªôt li√™n h·ªá -->
        <h6 class="accent">Li√™n h·ªá</h6> <!-- 100222: Ti√™u ƒë·ªÅ -->
        <div><i class="bi bi-geo-alt me-1"></i> 123 Q1, TP.HCM</div> <!-- 100223: ƒê·ªãa ch·ªâ -->
        <div><i class="bi bi-telephone me-1"></i> 0909 123 456</div> <!-- 100224: ƒêi·ªán tho·∫°i -->
        <div><i class="bi bi-envelope me-1"></i> info@2606ai.vn</div> <!-- 100225: Email -->
      </div> <!-- 100226: H·∫øt c·ªôt li√™n h·ªá -->
    </div> <!-- 100227: H·∫øt l∆∞·ªõi 4 c·ªôt -->
    <hr class="border-light opacity-50 my-3"> <!-- 100228: G·∫°ch ph√¢n c√°ch -->
    <div class="text-center small">¬© 2025 <span class="accent">2606AI</span>. Ph√°t tri·ªÉn b·ªüi 2606AI.</div> <!-- 100229: B·∫£n quy·ªÅn -->
  </div> <!-- 100230: H·∫øt wrap footer -->
</footer> <!-- 100231: K·∫øt th√∫c footer -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script> <!-- 100232: JS Bootstrap -->
<script> // 100233: B·∫Øt ƒë·∫ßu script ch√≠nh
// ==== Config & state ==== // 100234: C·∫•u h√¨nh + tr·∫°ng th√°i
const API_URL = "https://script.google.com/macros/s/AKfycby2PjYOKiRRphQCOI9eSDo8ShAY-Bugp_gQD7JjgJPaYE7fmaoDjbP4kXGWLpOQxWOh/exec"; // 100235: URL Apps Script
const ZALO_URL = "https://zalo.me/123456789"; // 100236: Li√™n k·∫øt Zalo
const state = { page:1, pageSize:36, q:"", group:"", type:"", loai:"", note:"", category:"", totalPages:1 }; // 100237: Tr·∫°ng th√°i l·ªçc & trang
const products = {}; const cart = []; // 100238: B·ªô nh·ªõ t·∫°m s·∫£n ph·∫©m + gi·ªè

// ==== Utils ==== // 100239: H√†m ti·ªán √≠ch
const $ = s=>document.querySelector(s); // 100240: Query m·ªôt ph·∫ßn t·ª≠
const $$ = s=>Array.from(document.querySelectorAll(s)); // 100241: Query nhi·ªÅu ph·∫ßn t·ª≠
const esc = s => (s??'').toString().replace(/[&<>\"]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;'}[c])); // 100242: Escape HTML
const fmtVND = n => (Number(n)||0).toLocaleString('vi-VN') + ' ƒë'; // 100243: ƒê·ªãnh d·∫°ng ti·ªÅn VND
const firstLink = s=>{ if(!s) return ''; const parts=String(s).split(/[\s,;|\n]+/).filter(Boolean); for(const p of parts) if(/^https?:\/\//i.test(p)) return p; return '' } // 100244: L·∫•y link ƒë·∫ßu ti√™n
const FALLBACK_ICON='https://placehold.co/64x64?text=%20&bg=E8F5E9&fc=2E7D32'; // 100245: ·∫¢nh thay th·∫ø
function toDriveThumb(u){ if(!u) return FALLBACK_ICON; const m=String(u).match(/\/d\/([^/]+)\//); if(m&&m[1]) return `https://drive.google.com/thumbnail?id=${m[1]}&sz=w200`; if(/drive\.google\.com\/thumbnail\?id=/i.test(u)) return u; return u; } // 100246: Chu·∫©n h√≥a link Drive
function safeImg(u){ if(!u) return FALLBACK_ICON; const url=toDriveThumb(u); return /^https?:\/\//i.test(url)?url:FALLBACK_ICON; } // 100247: ·∫¢nh an to√†n

// ==== D·ªØ li·ªáu nh√≥m & danh m·ª•c (demo) ==== // 100248: M·∫£ng c·∫•u h√¨nh
const GROUPS=[ 'QU√Ä T·∫∂NG ·∫§N PH·∫®M TH∆Ø∆†NG HI·ªÜU','QU√Ä T·∫∂NG S·∫¢N PH·∫®M TH∆Ø∆†NG HI·ªÜU','QU√Ä T·∫∂NG K·ª∂ NI·ªÜM EVENT','PH·ª§ KI·ªÜN TH∆Ø∆†NG HI·ªÜU','ƒê·ªêI T√ÅC 247 EXPRESS','KH√ÅC' ]; // 100249: Danh s√°ch group
const GROUP_ICONS={ 'QU√Ä T·∫∂NG ·∫§N PH·∫®M TH∆Ø∆†NG HI·ªÜU':'https://img.icons8.com/fluency/96/advertising.png','QU√Ä T·∫∂NG S·∫¢N PH·∫®M TH∆Ø∆†NG HI·ªÜU':'https://img.icons8.com/fluency/96/product.png','QU√Ä T·∫∂NG K·ª∂ NI·ªÜM EVENT':'https://img.icons8.com/fluency/96/conference-foreground-selected.png','PH·ª§ KI·ªÜN TH∆Ø∆†NG HI·ªÜU':'https://img.icons8.com/fluency/96/electronics.png','ƒê·ªêI T√ÅC 247 EXPRESS':'https://drive.google.com/thumbnail?id=1ixc_p6X925a0JpSG4YIWwpyauVmhRakI&sz=w200','KH√ÅC':'https://img.icons8.com/fluency/96/more.png' }; // 100250: Icon cho group
const CAT_CONFIG=[ {label:'Huy ch∆∞∆°ng ph√¥i s·∫µn',category:'Huy ch∆∞∆°ng ph√¥i s·∫µn'},{label:'Huy ch∆∞∆°ng s·ª± ki·ªán ch·∫°y b·ªô',category:'Huy ch∆∞∆°ng s·ª± ki·ªán ch·∫°y b·ªô'},{label:'M√≥c kh√≥a cao su',category:'M√≥c kh√≥a cao su'},{label:'M√≥c kh√≥a h·ª£p kim',category:'M√≥c kh√≥a h·ª£p kim'},{label:'M√≥c kh√≥a T·∫øt 2025',category:'M√≥c kh√≥a t·∫øt 2025'},{label:'M√≥c kh√≥a T·∫øt 2026',category:'M√≥c kh√≥a t·∫øt 2026'},{label:'M√≥c kh√≥a T·∫øt 2027',category:'M√≥c kh√≥a t·∫øt 2027'},{label:'M√≥c kh√≥a T·∫øt 2030',category:'M√≥c kh√≥a t·∫øt 2030'},{label:'Kh√°c',category:'Kh√°c'} ]; // 100251: Danh m·ª•c m·∫´u

function renderGroups(){ $('#groupBar').innerHTML = GROUPS.map(g=>`<button class="group-chip ${state.group===g?'active':''}" data-action="set-group" data-val="${esc(g)}"><img src="${esc(GROUP_ICONS[g]||GROUP_ICONS['KH√ÅC'])}" alt=""/><span>${esc(g)}</span></button>`).join(''); } // 100252: Render group chips
function renderCategories(){ $('#categoryGrid').innerHTML = CAT_CONFIG.map(c=>`<a class="category-item ${state.category===c.category?'active':''}" data-action="set-category" data-val="${esc(c.category)}"><span class="icon"><img src="https://drive.google.com/thumbnail?id=1e9N6rgsTP5vYtKl4Lwq801dfteYLbx_F&sz=w200" alt=""></span><span class="label">${esc(c.label)}</span></a>`).join(''); } // 100253: Render category grid

function productCard(it){ products[it.id]=it; const gift=firstLink(it.imageClick); return `<div class=\"col\"><div class=\"cardx\"><div class=\"position-relative\"><a href=\"${esc(it.linkFull||it.img||'#')}\" target=\"_blank\" rel=\"noopener\"><img class=\"thumb\" src=\"${esc(it.img)}\" alt=\"${esc(it.id)}\" onerror=\"this.src='https://placehold.co/600x400'\"/></a>${it.note?`<span class='note'>${esc(it.note)}</span>`:''}</div><div class=\"meta\"><div class=\"id\">${esc(it.id)}</div><div class=\"details\">${esc(it.details||'')}</div>${it.type?`<div class=\"type\">${esc(it.type)}</div>`:''}<div class=\"price\">${fmtVND(it.price)}</div><div class=\"d-flex align-items-center justify-content-between\">${gift?`<a class=\"btn-gift\" href=\"${esc(gift)}\" target=\"_blank\" rel=\"noopener\">${esc(it.loai||'Nh·∫≠n qu√†')}</a>`:'<span></span>'}<button class=\"add-btn\" data-action=\"add-to-cart\" data-id=\"${esc(it.id)}\">+</button></div></div></div></div>`; } // 100254: T·∫°o th·∫ª s·∫£n ph·∫©m HTML

function renderPagination(total){ const totalPages=Math.max(1,Math.ceil((total||0)/(state.pageSize||1))); state.totalPages=totalPages; const block=w=>`<div class='d-inline-flex align-items-center gap-1' data-where='${w}'><button class='btn btn-sm btn-outline-secondary' data-action='page-prev' ${state.page<=1?'disabled':''}>&lsaquo;</button><select class='form-select form-select-sm page-select' style='width:auto'>${Array.from({length:totalPages},(_,i)=>{const p=i+1;return `<option value='${p}' ${p===state.page?'selected':''}>Trang ${p}/${totalPages}</option>`}).join('')}</select><button class='btn btn-sm btn-outline-secondary' data-action='page-next' ${state.page>=totalPages?'disabled':''}>&rsaquo;</button></div>`; $('#pagerTop').innerHTML=block('top'); $('#pagerBottom').innerHTML=block('bottom'); $$('#pagerTop .page-select, #pagerBottom .page-select').forEach(sel=> sel.onchange = e=>{ state.page=+e.target.value||1; fetchPage(); }); } // 100255: Render ph√¢n trang

// ==== X∆∞·ªüng ƒë·ªÅ xu·∫•t ==== // 100256: API x∆∞·ªüng
async function fetchXuong(){ try{ const qs=new URLSearchParams({action:'ads',q:state.q,group:state.group,type:state.type,loai:state.loai,note:state.note,category:state.category}); const r=await fetch(API_URL+'?'+qs.toString(),{mode:'cors'}); const j=await r.json(); renderXuong(j.items||[]); }catch{ renderXuong([]); } } // 100257: G·ªçi API ads v√† render
function renderXuong(items){ const list=$('#xuongList'), badge=$('#xuongCount'), empty=$('#xuongEmpty'); const data=(Array.isArray(items)&&items.length)?items:[{title:'X∆∞·ªüng A ‚Äì UV Kim Lo·∫°i',desc:'Nh·∫≠n in UV badge/huy hi·ªáu s·ªë l∆∞·ª£ng nh·ªè',url:'#',img:'https://picsum.photos/96?1'},{title:'X∆∞·ªüng B ‚Äì ƒê√∫c H·ª£p Kim',desc:'Huy ch∆∞∆°ng 3D, m·∫° v√†ng/niken',url:'#',img:'https://picsum.photos/96?2'}]; list.innerHTML=data.map(it=>`<a class=\"link-preview text-decoration-none\" href=\"${esc(it.url||'#')}\" target=\"_blank\" rel=\"noopener\"><img class=\"thumb\" src=\"${esc(safeImg(it.img))}\" alt=\"\"><div class=\"flex-grow-1 small\"><div class=\"title\">${esc(it.title||'X∆∞·ªüng ƒë·ªÅ xu·∫•t')}</div>${it.desc?`<div class=\\"text-muted\\" style=\\"font-size:12px\\">${esc(it.desc)}</div>`:''}</div></a>`).join(''); const n=data.length; if(badge){badge.textContent=n; badge.style.display=n?'inline-block':'none';} if(empty){empty.style.display=n?'none':'block';} } // 100258: Render danh s√°ch x∆∞·ªüng

// ==== T·∫£i d·ªØ li·ªáu s·∫£n ph·∫©m ==== // 100259: Fetch list
let _timer=0; const DEBOUNCE=160; function fetchPage(){ clearTimeout(_timer); _timer=setTimeout(_doFetch,DEBOUNCE); } // 100260: Debounce fetch
async function _doFetch(){ const qs=new URLSearchParams({action:'list',page:state.page,pageSize:state.pageSize,q:state.q,group:state.group,type:state.type,loai:state.loai,note:state.note,category:state.category}); try{ const res=await fetch(API_URL+'?'+qs.toString(),{mode:'cors'}); const raw=await res.text(); let json; try{ json=JSON.parse(raw);}catch{ json=JSON.parse(raw.replace(/^\)\]\}'[^\n]*\n?/,'').replace(/^\uFEFF/,'').trim()); } const items=json.items||[]; const facets=json.facets||{}; const total=json.total||items.length; $('#productGrid').innerHTML=items.length?items.map(productCard).join(''):'<div class="text-muted">Kh√¥ng c√≥ d·ªØ li·ªáu.</div>'; $('#totalCount').textContent=Number(total).toLocaleString('vi-VN'); renderPagination(total); buildFilterBox('typeBox',facets.types||[],'type'); buildFilterBox('loaiBox',facets.loais||[],'loai'); buildFilterBox('noteBox',facets.notes||[],'note'); buildFilterBox('brandBox',facets.categories||[],'category'); fetchXuong(); }catch(err){ $('#errbox').style.display='block'; $('#errbox').textContent='[ERROR] Kh√¥ng t·∫£i ƒë∆∞·ª£c d·ªØ li·ªáu.'; } } // 100261: G·ªçi API & render grid
function buildFilterBox(id,items,field){ const box=document.getElementById(id); if(!box) return; box.classList.add('d-flex','flex-wrap','gap-2'); box.innerHTML=(items||[]).map(val=>`<button class='btn btn-sm ${state[field]===val?'btn-success':'btn-outline-secondary'}' data-action='set-filter' data-field='${field}' data-val='${esc(val)}'>${esc(val)}</button>`).join(''); } // 100262: T·∫°o c√°c n√∫t filter

// ==== Gi·ªè h√†ng ==== // 100263: Logic cart
function updateCart(){ const list=$('#cartList'); let total=0; list.innerHTML=cart.map(it=>{ const sub=it.qty*(+it.price||0); total+=sub; return `<div class='d-flex align-items-center gap-2 border-bottom py-2'><img src='${esc(it.img)}' alt='' style='width:50px;height:50px;object-fit:cover;border-radius:6px;border:1px solid #eee'><div class='flex-grow-1'><div class='fw-semibold small text-truncate'>${esc(it.details||it.id)}</div><div class='text-muted small'>${fmtVND(it.price)}</div></div><div class='d-flex align-items-center gap-1'><button class='btn btn-sm btn-outline-secondary' data-action='qty' data-id='${esc(it.id)}' data-delta='-1'>-</button><span>${it.qty}</span><button class='btn btn-sm btn-outline-secondary' data-action='qty' data-id='${esc(it.id)}' data-delta='1'>+</button></div><div style='min-width:90px;text-align:right' class='small'>${fmtVND(sub)}</div><button class='btn btn-sm btn-link text-danger' data-action='remove' data-id='${esc(it.id)}'>&times;</button></div>`; }).join(''); $('#cartTotal').textContent=fmtVND(total); const count=cart.reduce((a,b)=>a+b.qty,0); const b=$('#cartFabCount'); b.textContent=count; b.style.display=count?'inline-block':'none'; } // 100264: C·∫≠p nh·∫≠t UI gi·ªè
function addToCartById(id){ const it=products[id]; if(!it) return; const f=cart.find(p=>p.id===id); if(f) f.qty++; else cart.push({...it,qty:1}); updateCart(); cartCanvas.toggle(); } // 100265: Th√™m v√†o gi·ªè v√† m·ªü panel
function changeQty(id,delta){ const it=cart.find(p=>p.id===id); if(!it) return; it.qty+=delta; if(it.qty<=0) cart.splice(cart.indexOf(it),1); updateCart(); } // 100266: TƒÉng/gi·∫£m s·ªë l∆∞·ª£ng
function removeItem(id){ const i=cart.findIndex(p=>p.id===id); if(i>=0) cart.splice(i,1); updateCart(); } // 100267: X√≥a item kh·ªèi gi·ªè
async function submitOrder(){ if(!cart.length){ alert('Gi·ªè h√†ng tr·ªëng!'); return; } const name=$('#buyerName').value.trim(), email=$('#buyerEmail').value.trim(), phone=$('#buyerPhone').value.trim(), address=$('#buyerAddress').value.trim(), note=$('#buyerNote').value.trim(); if(!name||!email||!phone||!address){ alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!'); return; } const order={ customer:{name,email,phone,address,note}, items:cart.map(({id,details,type,price,qty,img,linkFull,group,loai,category,note})=>({id,details,type,price,qty,img,linkFull,group,loai,category,note})), total:cart.reduce((a,b)=>a+b.qty*(+b.price||0),0) }; try{ const r=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({action:'order',data:order})}); const j=await r.json(); if(j&&(j.ok||j.success)){ alert('ƒê√£ g·ª≠i ƒë∆°n h√†ng th√†nh c√¥ng!'); cart.length=0; updateCart(); } else { alert('G·ª≠i ƒë∆°n h√†ng th·∫•t b·∫°i.'); } }catch{ alert('Kh√¥ng th·ªÉ g·ª≠i ƒë∆°n h√†ng. Ki·ªÉm tra API_URL.'); } } // 100268: G·ª≠i ƒë∆°n h√†ng l√™n API

// ==== S·ª± ki·ªán ==== // 100269: Event delegation
const cartCanvas=bootstrap.Offcanvas.getOrCreateInstance(document.getElementById('cartCanvas')); // 100270: T·∫°o offcanvas gi·ªè
const filterCanvas=bootstrap.Offcanvas.getOrCreateInstance(document.getElementById('filterPanel')); // 100271: T·∫°o offcanvas l·ªçc
const suppliersCanvas=bootstrap.Offcanvas.getOrCreateInstance(document.getElementById('suppliersCanvas')); // 100272: T·∫°o offcanvas x∆∞·ªüng

document.addEventListener('click',e=>{ const el=e.target; if(el.matches('#searchBtn')){ state.q=$('#searchBox').value.trim(); state.page=1; fetchPage(); } if(el.matches('[data-action="page-prev"]')){ if(state.page>1){ state.page--; fetchPage(); } } if(el.matches('[data-action="page-next"]')){ if(state.page<state.totalPages){ state.page++; fetchPage(); } } if(el.matches('[data-action="set-group"]')){ state.group=el.dataset.val||''; state.page=1; renderGroups(); fetchPage(); } if(el.closest('[data-action="set-category"]')){ const x=el.closest('[data-action="set-category"]'); state.category=x.dataset.val||''; state.page=1; renderCategories(); fetchPage(); } if(el.matches('[data-action="set-filter"]')){ const f=el.dataset.field; state[f]=el.dataset.val||''; state.page=1; fetchPage(); } if(el.matches('[data-action="add-to-cart"]')){ addToCartById(el.dataset.id); } if(el.matches('[data-action="qty"]')){ changeQty(el.dataset.id, +(el.dataset.delta||0)); } if(el.matches('[data-action="remove"]')){ removeItem(el.dataset.id); } if(el.matches('#clearFilters')){ Object.assign(state,{q:'',group:'',type:'',loai:'',note:'',category:'',page:1}); $('#searchBox').value=''; renderGroups(); renderCategories(); fetchPage(); } if(el.matches('#submitOrderBtn')){ submitOrder(); } if(el.matches('#cartFab')){ cartCanvas.toggle(); } if(el.matches('#filterFab')){ filterCanvas.toggle(); } if(el.matches('#suppliersFab')){ suppliersCanvas.show(); } }); // 100273: L·∫Øng nghe click v√† ƒëi·ªÅu h∆∞·ªõng h√†nh vi

$('#searchBox').addEventListener('keydown',e=>{ if(e.key==='Enter'){ e.preventDefault(); $('#searchBtn').click(); }}); // 100274: Enter ƒë·ªÉ t√¨m

// ==== Kh·ªüi t·∫°o ==== // 100275: Ch·∫°y l√∫c load
$('#zaloFab').href=ZALO_URL; $('#xuongContactBtn').href=ZALO_URL; // 100276: G√°n link Zalo
$('#logoLink').addEventListener('click', e=>{ e.preventDefault(); window.scrollTo({top:0,behavior:'smooth'}); setTimeout(()=>location.reload(),150); }); // 100277: Click logo scroll l√™n & refresh nh·∫π
renderGroups(); renderCategories(); fetchPage(); // 100278: Render ban ƒë·∫ßu v√† t·∫£i d·ªØ li·ªáu
</script> <!-- 100279: K·∫øt th√∫c script -->
</body> <!-- 100280: K·∫øt th√∫c body -->
</html> <!-- 100281: K·∫øt th√∫c t√†i li·ªáu -->
