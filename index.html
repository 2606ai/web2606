<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PCGbrand - Thi·∫øt k·∫ø & Mua tr·ª±c ti·∫øp</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
  :root{ --main:#0018a8; --accent:#d4af37; --bg:#f5f6fa; --border:#e9e9ee; }
  body{font-family:'Be Vietnam Pro',sans-serif;background:var(--bg);color:#222;font-size:14px}
  .container-xl{max-width:1320px}
  /* ========== TOP BANNER ========== */
  .top-ad{background:#0f172a;color:#fff;height:66px;display:flex;align-items:center;justify-content:center;padding:0 12px;
    box-shadow:0 6px 18px rgba(0,0,0,.12);position:sticky;top:0;z-index:1020}
  .top-ad .inner{max-width:1320px;width:100%;display:flex;align-items:center;gap:10px}
  .top-ad .logo img{height:38px;width:38px;border-radius:8px}
  .top-ad .msg{font-weight:800}
  .top-ad .cta{margin-left:auto;display:flex;gap:8px}
  .top-ad .cta a{background:#fff;color:#111;font-weight:800;padding:6px 12px;border-radius:10px;text-decoration:none}
  .top-ad .cta a:hover{opacity:.9}
  @media(max-width:768px){.top-ad{position:fixed;left:0;right:0;top:0;z-index:1030}.top-ad-spacer{height:66px}}
  /* ========== NAVBAR ========== */
  .navbar{background:#fff;border-bottom:1px solid var(--border)}
  .brand{font-weight:800;color:var(--main)}
  .search-input{border:1px solid #ddd;border-radius:10px;padding:8px 12px;width:100%}
  .btn-cart{background:var(--main);color:#fff;border:none;border-radius:10px;padding:8px 12px}
  .btn-cart .count{background:#fff;color:#111;border-radius:999px;padding:2px 8px;margin-left:6px;font-weight:800}
  /* ========== HERO ========== */
  .hero-wrap{max-width:1320px;margin:12px auto 0;padding:0 8px}
  .hero-card{border-radius:18px;overflow:hidden;background:#fff;box-shadow:0 18px 45px rgba(11,20,64,.08)}
  #heroCarousel .carousel-item img{height:280px;object-fit:cover}
  .hero-caption{position:absolute;left:0;right:0;bottom:14px;color:#fff;text-align:center;font-weight:700;font-size:22px;text-shadow:0 10px 28px rgba(0,0,0,.55)}
  .hero-caption .hero-sub{font-size:13px;font-weight:400;opacity:.95}
  /* ========== CATEGORIES ========== */
  .cats{display:flex;gap:8px;overflow:auto;padding:8px}
  .cat-btn{white-space:nowrap;border:1px solid var(--border);padding:6px 14px;border-radius:999px;background:#fff;cursor:pointer;
           font-weight:600;transition:.15s;font-size:13px}
  .cat-btn:hover,.cat-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}
  /* ========== PRODUCT GRID ========== */
  .grid{display:grid;gap:8px;grid-template-columns:repeat(2,1fr)}
  @media(min-width:640px){.grid{grid-template-columns:repeat(3,1fr)}}
  @media(min-width:992px){.grid{grid-template-columns:repeat(4,1fr)}}
  .cardx{border:0;background:#fff;transition:.2s;cursor:pointer;border-radius:12px;overflow:hidden;position:relative;box-shadow:0 2px 6px rgba(0,0,0,.06)}
  .cardx:hover{transform:translateY(-2px);box-shadow:0 6px 14px rgba(0,0,0,.1)}
  .thumb{width:100%;aspect-ratio:1/1;object-fit:cover;display:block;background:#f2f2f2}
  .meta{padding:8px}
  .id{font-weight:700;font-size:13px}
  .price{color:#0066cc;font-weight:800;font-size:13px}
  .row-meta{display:flex;justify-content:space-between;align-items:center}
  .add-btn{width:28px;height:28px;border-radius:8px;border:none;background:var(--main);color:#fff;font-size:18px;font-weight:700}
  .add-btn:hover{background:#000f66}
  .type-badge{display:inline-block;margin-top:4px;padding:2px 6px;font-size:11px;border-radius:6px;background:#eef2ff;color:#334}
  .note-badge{position:absolute;top:8px;left:8px;background:#ffc107;color:#111;font-weight:700;padding:2px 8px;border-radius:6px;font-size:12px}
  /* ========== CART ========== */
  .cart-item{display:flex;gap:8px;align-items:center;border-bottom:1px solid #eee;padding:6px 0}
  .cart-item img{width:46px;height:46px;border-radius:6px;object-fit:cover}
  .total{font-weight:800;color:var(--accent)}
  footer{margin-top:24px;padding:18px;background:var(--main);color:#fff;text-align:center;font-size:13px}
</style>
</head>
<body>

<!-- BANNER -->
<div class="top-ad"><div class="inner">
  <div class="logo"><img src="https://i.imgur.com/0OG2GfW.png"></div>
  <div class="msg">∆Øu ƒë√£i th√°ng n√†y cho kh√°ch ƒë·∫∑t qua 2606ai.vn</div>
  <div class="cta"><a href="#factories">Xem x∆∞·ªüng uy t√≠n</a><a href="https://zalo.me/0936169692" target="_blank">Chat nhanh Zalo</a></div>
</div></div>
<div class="top-ad-spacer"></div>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="container-xl d-flex align-items-center gap-2 py-2">
    <div class="brand me-2">PCGbrand</div>
    <input id="searchBox" class="search-input" placeholder="T√¨m s·∫£n ph·∫©m...">
    <button id="searchBtn" class="btn-cart ms-2">üîç</button>
    <button class="btn-cart ms-auto" type="button" data-bs-toggle="offcanvas" data-bs-target="#cartCanvas">üõí Gi·ªè h√†ng <span id="cartCount" class="count">0</span></button>
  </div>
</nav>

<!-- HERO -->
<div class="hero-wrap">
  <div class="hero-card">
    <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4500">
      <div class="carousel-inner">
        <div class="carousel-item active"><img src="https://picsum.photos/1600/280?random=21" class="d-block w-100"><div class="hero-caption">ƒê·∫∑t h√†ng theo thi·∫øt k·∫ø ri√™ng<div class="hero-sub">M·∫° v√†ng, ƒë·ªï men m√†u, ƒë√∫c n·ªïi 3D</div></div></div>
        <div class="carousel-item"><img src="https://picsum.photos/1600/280?random=22" class="d-block w-100"><div class="hero-caption">X∆∞·ªüng ∆∞u ti√™n<div class="hero-sub">Gi√° t·ªët ‚Äì B·∫£o h√†nh nghi√™m</div></div></div>
        <div class="carousel-item"><img src="https://picsum.photos/1600/280?random=23" class="d-block w-100"><div class="hero-caption">Giao nhanh ‚Äì QC 2 l·ªõp<div class="hero-sub">Cam k·∫øt ch·∫•t l∆∞·ª£ng & ti·∫øn ƒë·ªô</div></div></div>
      </div>
    </div>
  </div>
</div>

<!-- CATEGORIES -->
<div class="cats-wrap"><div id="categoryBox" class="cats"></div></div>

<!-- MAIN -->
<div class="main-wrap container-xl mt-3">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h6 class="m-0">Danh s√°ch s·∫£n ph·∫©m</h6>
    <div class="d-flex gap-2"><button id="prevBtn" class="btn btn-light btn-sm">‚Üê Tr∆∞·ªõc</button><button id="nextBtn" class="btn btn-light btn-sm">Sau ‚Üí</button></div>
  </div>
  <div class="grid" id="productGrid"></div>
</div>

<!-- CART -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="cartCanvas">
  <div class="offcanvas-header"><h5>üõí Gi·ªè h√†ng</h5><button class="btn-close" data-bs-dismiss="offcanvas"></button></div>
  <div class="offcanvas-body">
    <div id="cartListSide" class="small mb-3">Ch∆∞a c√≥ s·∫£n ph·∫©m.</div>
    <div class="d-flex justify-content-between mb-2"><span>T·ªïng ti·ªÅn:</span><span class="total" id="cartTotalSide">0 ƒë</span></div>
    <button id="clearBtnSide" class="btn btn-light btn-sm">X√≥a gi·ªè</button>
  </div>
</div>

<footer>¬© 2025 2606ai.vn ‚Äì All rights reserved</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
/* ===== CONFIG ===== */
const API_URL = "https://script.google.com/macros/s/AKfycbwz5aKDKEMN5FVc5rguRkvcN0NKymb5IvKJ4J0KmMaOfDRS2kqCtToRsDCzROiHvM2H/exec"; // <--- thay link Web App Script ·ªü ƒë√¢y
const state={page:1,pageSize:15,q:'',group:''};
const fmtVND=n=>(Number(n)||0).toLocaleString('vi-VN')+' ƒë';
const esc=s=>(s??'').toString().replace(/[&<>"]/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;"}[m]));

/* ===== CART ===== */
let cart=[];function saveCart(){localStorage.setItem('pcg_cart',JSON.stringify(cart));updateCartUI();}
function loadCart(){cart=JSON.parse(localStorage.getItem('pcg_cart')||'[]');updateCartUI();}
function updateCartUI(){
  const box=document.getElementById('cartListSide');const countEl=document.getElementById('cartCount');
  if(!cart.length){box.innerHTML='Ch∆∞a c√≥ s·∫£n ph·∫©m.';countEl.textContent='0';}
  else{
    box.innerHTML=cart.map((it,i)=>`<div class="cart-item"><img src="${esc(it.img)}"><div class="flex-fill small"><b>${esc(it.id)}</b><br>${fmtVND(it.price)} √ó ${it.qty}</div><button data-dec="${i}">-</button><button data-inc="${i}">+</button><button data-rm="${i}">‚úï</button></div>`).join('');
    countEl.textContent=cart.reduce((s,it)=>s+it.qty,0);
  }
  document.getElementById('cartTotalSide').textContent=fmtVND(cart.reduce((s,it)=>s+(Number(it.price)||0)*it.qty,0));
}
document.getElementById('cartListSide').addEventListener('click',e=>{
  if(e.target.dataset.inc){cart[e.target.dataset.inc].qty++;saveCart();}
  if(e.target.dataset.dec){let i=e.target.dataset.dec;cart[i].qty--;if(cart[i].qty<=0)cart.splice(i,1);saveCart();}
  if(e.target.dataset.rm){cart.splice(e.target.dataset.rm,1);saveCart();}
});
document.getElementById('clearBtnSide').onclick=()=>{cart=[];saveCart();};

/* ===== RENDER ===== */
function productCardHtml(it){
  return `<div class="cardx"><img class="thumb" src="${esc(it['Big Img'])||''}" onerror="this.src='https://via.placeholder.com/400?text=No+Image'">
    <div class="meta"><div class="id">${esc(it.ID)}</div><div class="details small text-muted">${esc(it.Details||'')}</div>
    <div class="type-badge">${esc(it.TYPE||'')}</div>
    <div class="row-meta mt-1"><div class="price">${fmtVND(it.Price)}</div>
    <button class="add-btn" data-add='${JSON.stringify({id:it.ID,price:it.Price,img:it["Big Img"]})}'>+</button></div></div></div>`;
}
function render(res){
  const grid=document.getElementById('productGrid');
  grid.innerHTML=(res.items||[]).map(it=>productCardHtml(it)).join('')||'<div class="text-muted">Kh√¥ng c√≥ s·∫£n ph·∫©m.</div>';
  // build categories
  const box=document.getElementById('categoryBox');
  box.innerHTML='<button class="cat-btn'+(!state.group?' active':'')+'" data-group="">T·∫•t c·∫£</button>'+(res.facets.groups||[]).map(g=>`<button class="cat-btn ${state.group===g?'active':''}" data-group="${g}">${g}</button>`).join('');
}

/* ===== FETCH ===== */
function fetchPage(){
  fetch(`${API_URL}?action=list&page=${state.page}&pageSize=${state.pageSize}&q=${encodeURIComponent(state.q)}&group=${encodeURIComponent(state.group)}`)
  .then(r=>r.json()).then(res=>render(res))
  .catch(err=>{console.error(err);document.getElementById('productGrid').innerHTML='<div class="text-danger">L·ªói t·∫£i d·ªØ li·ªáu</div>';});
}

/* ===== EVENTS ===== */
document.getElementById('productGrid').addEventListener('click',e=>{
  if(e.target.classList.contains('add-btn')){
    const it=JSON.parse(e.target.dataset.add);
    const f=cart.find(x=>x.id===it.id);if(f)f.qty++;else cart.push({...it,qty:1});
    saveCart();
  }
});
document.getElementById('categoryBox').addEventListener('click',e=>{
  const btn=e.target.closest('.cat-btn');if(!btn)return;
  state.group=btn.dataset.group;state.page=1;fetchPage();
  document.querySelectorAll('.cat-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');
});
document.getElementById('searchBtn').onclick=()=>{state.q=document.getElementById('searchBox').value.trim();state.page=1;fetchPage();};
document.getElementById('prevBtn').onclick=()=>{if(state.page>1){state.page--;fetchPage();}};
document.getElementById('nextBtn').onclick=()=>{state.page++;fetchPage();};

/* ===== INIT ===== */
document.addEventListener('DOMContentLoaded',()=>{loadCart();fetchPage();});
</script>
</body>
</html>
