<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>2606AI ‚Äì Tham kh·∫£o & B√°o gi√°</title>

<link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --brand:#1e7b45;
  --brand-2:#0d4d2b;
  --ink:#0b2e1d;
  --muted:#5f6b62;
  --line:#e6ede9;
  --bg:#f6f8f7;
  --card:#ffffff;
  --sh1:0 1px 0 var(--line);
  --sh2:0 6px 16px rgba(16,24,24,.08);
  --price:#d84d3f;
}

*{box-sizing:border-box}
html,body{background:var(--bg)}
body{
  margin:0;
  font-family:"Be Vietnam Pro",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  font-size:14px; line-height:1.55; color:var(--ink);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* header */
.header{
  position:sticky; top:0; z-index:30;
  background:#fff; box-shadow:var(--sh1);
}
.header__inner{
  max-width:1180px; margin:0 auto; padding:10px 16px;
  display:flex; align-items:center; gap:12px;
}
.logo{height:36px}
.search{flex:1; display:flex; gap:8px}
.search input{
  flex:1; padding:10px 12px; border-radius:10px;
  border:1px solid var(--line); outline:none;
  font-weight:500; background:#fff;
}
.search button{
  border:none; border-radius:10px; padding:10px 14px;
  color:#fff; font-weight:800; cursor:pointer;
  background:linear-gradient(90deg,var(--brand),var(--brand-2));
}

/* top notice */
.notice{
  background:#0d4d2b; color:#e8f5ed; font-weight:700;
  font-size:12.5px; text-align:center; padding:6px 10px;
}

/* layout */
.container{max-width:1180px;margin:14px auto;display:grid;grid-template-columns:260px 1fr;gap:16px;padding:0 16px}

/* left column */
.left{display:flex;flex-direction:column;gap:12px}
.tile{
  background:#fff;border:1px solid var(--line);
  border-radius:14px;padding:12px;box-shadow:var(--sh2)
}

/* hero banner s·ª≠a l·ªói khung h√¨nh */
.hero{
  display:grid;grid-template-columns:2fr 1fr;gap:12px
}
.hero .big,.hero .small{
  border-radius:14px;overflow:hidden;
  border:1px solid var(--line);
  background:#fff;box-shadow:var(--sh2);
  position:relative;
}
.hero .big img,
.hero .small img{
  width:100%;height:100%;
  object-fit:cover;
  aspect-ratio:16/9;      /* ‚úÖ lu√¥n gi·ªØ khung ƒë√∫ng t·ªâ l·ªá ngang */
  display:block;
  transition:transform .4s ease;
}
.hero img:hover{transform:scale(1.04)}
.hero .col{display:grid;grid-template-rows:1fr 1fr;gap:12px}

/* card s·ª≠a l·ªói khung h√¨nh */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
.card{
  position:relative;
  border:1px solid var(--line);
  background:#fff;
  border-radius:14px;
  box-shadow:0 6px 16px rgba(0,0,0,.05);
  display:flex;flex-direction:column;
  overflow:hidden;
  transition:transform .25s ease, box-shadow .25s ease;
}
.card:hover{transform:translateY(-3px);box-shadow:0 10px 24px rgba(0,0,0,.1);}
.card .thumb{
  width:100%;
  aspect-ratio:1/1;       /* ‚úÖ ·∫£nh s·∫£n ph·∫©m hi·ªÉn th·ªã vu√¥ng */
  object-fit:cover;
  background:#f9faf9;
  border-bottom:1px solid var(--line);
}
.card .body{padding:12px 14px;display:flex;flex-direction:column;gap:10px}
.card .title{
  font-weight:800;font-size:15px;line-height:1.3;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden
}
.card .desc{
  color:var(--muted);font-size:13px;line-height:1.4;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden
}
.meta-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.meta-row .price{color:var(--price);font-weight:800;font-size:15px}
.meta-row .chips{margin-left:auto;display:flex;gap:6px;flex-wrap:wrap}
.chip{font-size:11px;font-weight:700;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:#fff;color:#374151}
.chip--green{background:#eaf5ef;border-color:#cfe5d8;color:#146236}
.chip--muted{background:#f5f7f6;color:#4b5563}
.actions{display:flex;gap:8px;margin-top:auto}
.btn{
  border:1px solid var(--line);color:var(--ink);font-weight:800;background:#fff;border-radius:12px;
  padding:10px 12px;flex:1;cursor:pointer;box-shadow:0 2px 6px rgba(16,24,24,.06);transition:.15s ease
}
.btn:hover{transform:translateY(-1px);box-shadow:0 10px 22px rgba(16,24,24,.10)}
.btn.primary{background:linear-gradient(90deg,var(--brand),var(--brand-2));color:#fff;border-color:transparent}

/* c√°c ph·∫ßn kh√°c gi·ªØ nguy√™n */
.ribbon{
  position:absolute;top:10px;left:-8px;
  color:#fff;font-weight:800;font-size:12px;
  padding:6px 10px 6px 16px;
  background:linear-gradient(90deg,#f97316,#ef4444);
  border-top-right-radius:10px;border-bottom-right-radius:10px;
  box-shadow:0 10px 24px rgba(0,0,0,.12),inset 0 1px 0 rgba(255,255,255,.35)
}
.ribbon--green{background:linear-gradient(90deg,#22c55e,#16a34a)}
.ribbon--red{background:linear-gradient(90deg,#ef4444,#b91c1c)}

</style>
</head>

<body>
  <header class="header">
    <div class="header__inner">
      <img class="logo" src="https://2606ai.vn/logo.png" alt="2606AI logo" />
      <div class="search">
        <input id="q" type="search" placeholder="T√¨m s·∫£n ph·∫©m‚Ä¶ (ID, m√¥ t·∫£)" />
        <button id="btnSearch">T√¨m</button>
      </div>
    </div>
    <div class="notice">ƒê·ªÉ ƒë·∫£m b·∫£o quy·ªÅn l·ª£i, h√£y th√¥ng b√°o v·ªõi 2606AI.VN khi b·∫°n ch·ªët ƒë∆°n h√†ng ‚Ä¢ Ngu·ªìn thu c·ªßa 2606AI.VN ƒë·∫øn t·ª´ qu·∫£ng c√°o</div>
  </header>

  <main class="container">
    <!-- LEFT -->
    <aside class="left">
      <section class="tile">
        <div class="small-list">
          <div class="small-item">
            <div class="si__n">1</div>
            <div class="si__ct">
              <div class="tt">Tham kh·∫£o 10,000+ m·∫´u s·∫£n ph·∫©m</div>
              <div class="mut">Kh√¥ng t∆∞·ªüng</div>
            </div>
            <span class="badge ok">Mi·ªÖn ph√≠</span>
          </div>
          <div class="small-item">
            <div class="si__n">2</div>
            <div class="si__ct">
              <div class="tt">H∆°n 500+ nh√† cung c·∫•p & x∆∞·ªüng s·∫£n xu·∫•t</div>
              <div class="mut">B√°o gi√° nhanh, ƒëa d·∫°ng, so s√°nh</div>
            </div>
            <span class="badge ok">Mi·ªÖn ph√≠</span>
          </div>
          <div class="small-item">
            <div class="si__n">3</div>
            <div class="si__ct">
              <div class="tt">H·ªó tr·ª£ t∆∞ v·∫•n s·∫£n xu·∫•t</div>
              <div class="mut">Ph·∫£n h·ªìi nhanh, nhi·ªÅu nhu c·∫ßu</div>
            </div>
            <span class="badge ok">Mi·ªÖn ph√≠</span>
          </div>
          <div class="small-item">
            <div class="si__n">4</div>
            <div class="si__ct">
              <div class="tt">H·ªó tr·ª£ thi·∫øt k·∫ø 2D, 3D s·∫£n xu·∫•t</div>
              <div class="mut">Mockup mi·ªÖn ph√≠ c√°c ƒë∆°n h√†ng ch·ªët</div>
            </div>
            <span class="badge ok">Mi·ªÖn ph√≠</span>
          </div>
          <div class="small-item">
            <div class="si__n">5</div>
            <div class="si__ct">
              <div class="tt">H·∫≠u c·∫ßn v·∫≠n chuy·ªÉn & ƒë√≥ng g√≥i</div>
              <div class="mut">Chuy√™n nghi·ªáp</div>
            </div>
            <span class="badge warn">C√≥ ph√≠</span>
          </div>
          <div class="small-item">
            <div class="si__n">6</div>
            <div class="si__ct">
              <div class="tt">H·ªó tr·ª£ gi·∫£i quy·∫øt tranh ch·∫•p</div>
              <div class="mut">B·∫£o v·ªá quy·ªÅn l·ª£i</div>
            </div>
            <span class="badge warn">C√≥ ph√≠</span>
          </div>
        </div>
      </section>

      <section class="tile">
        <div style="display:flex;align-items:center;gap:8px;justify-content:space-between">
          <strong>X∆∞·ªüng ƒë·ªÅ xu·∫•t</strong>
          <span class="badge">10</span>
        </div>
        <div id="suppliers" class="mt-8" style="display:flex;flex-direction:column;gap:10px">
          <!-- supplier rows render -->
        </div>
      </section>
    </aside>

    <!-- RIGHT -->
    <section class="right">
      <!-- hero -->
      <section class="hero">
        <figure class="big"><img src="https://images.unsplash.com/photo-1501004318641-b39e6451bec6?q=80&w=1600&auto=format&fit=crop" alt=""></figure>
        <div class="col">
          <figure class="small"><img src="https://images.unsplash.com/photo-1593031487898-5b94d8a11ee5?q=80&w=1200&auto=format&fit=crop" alt=""></figure>
          <figure class="small"><img src="https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1200&auto=format&fit=crop" alt=""></figure>
        </div>
      </section>

      <!-- toolbar -->
      <section class="tile">
        <div class="toolbar">
          <div class="filters" id="filters">
            <button class="group active" data-filter="group" data-value="">T·∫•t c·∫£</button>
            <button class="group" data-filter="group" data-value="QU√Ä T·∫∂NG 247 EXPRESS (ƒê·ªëi t√°c)">QU√Ä T·∫∂NG 247 EXPRESS</button>
            <button class="group" data-filter="group" data-value="MAY M·∫∂C TH·ªúI TRANG">MAY M·∫∂C TH·ªúI TRANG</button>
            <button class="group" data-filter="group" data-value="ƒê·ªí DA CAO C·∫§P">ƒê·ªí DA CAO C·∫§P</button>
            <button class="group" data-filter="group" data-value="QU√Ä T·∫∂NG DOANH NGHI·ªÜP">QU√Ä T·∫∂NG DOANH NGHI·ªÜP</button>
          </div>
          <div class="toolbar__right">
            <button id="btnClear" class="btn-clear">‚ú¶ X√≥a b·ªô l·ªçc</button>
            <div class="select">
              <span class="muted">Trang</span>
              <select id="pageSel"></select>
            </div>
          </div>
        </div>
      </section>

      <!-- list -->
      <section id="list" class="grid">
        <!-- cards render -->
      </section>

      <!-- pager -->
      <div class="pager">
        <div class="pager__wrap">
          <button id="prev" class="edge">‚Äπ</button>
          <select id="pageSel2"></select>
          <button id="next" class="edge">‚Ä∫</button>
        </div>
      </div>
    </section>
  </main>

  <!-- FABs -->
  <div class="fabs">
    <button class="fab__btn" title="Gi·ªè h√†ng">üõí</button>
    <button class="fab__btn" title="X∆∞·ªüng">üè≠</button>
    <button class="fab__btn" title="C√†i ƒë·∫∑t">‚öôÔ∏è</button>
    <a class="fab__btn fab__btn--zalo" title="Zalo" href="#" target="_blank" rel="noopener">Z</a>
  </div>

<script>
/* ================== CONFIG ================== */
// THAY URL WEB APP C·ª¶A B·∫†N ·ªû D√íNG N√ÄY:
const API_BASE = 'https://script.google.com/macros/s/AKfycbwFvoS6TSdj4ADked9RyTvG-A1fFfrkvqIJpeyNXy2bUqFpF07DEnHRx6O0TKlmZXkp/exec';

/* ================ STATE ================ */
const state = {
  page: 1,
  pageSize: 20,
  total: 0,
  filters: { q:'', group:'', type:'', loai:'', note:'', category:'' }
};

/* =============== HELPERS =============== */
const $ = (sel, ctx=document)=>ctx.querySelector(sel);
const $$ = (sel, ctx=document)=>Array.from(ctx.querySelectorAll(sel));

function escapeHTML(s=''){ return String(s).replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])) }
function fmtPrice(n){
  const x = Number(n||0);
  return (x>0? x.toLocaleString('vi-VN') : '1') + '\u00A0ƒë'; // NBSP tr∆∞·ªõc 'ƒë'
}

/* tags theo site c≈© */
function classicTags(it){
  const tags = [];
  const hay = ((it.search||'') + ' ' + (it.note||'')).toLowerCase();
  if(hay.includes('gi√° tham kh·∫£o')) tags.push({text:'Gi√° tham kh·∫£o', cls:'chip--green'});
  if(hay.includes('·∫£nh tham kh·∫£o')) tags.push({text:'·∫¢nh tham kh·∫£o', cls:'chip'});
  if(tags.length===0) tags.push({text:'Chi ti·∫øt', cls:'chip--muted'});
  return tags.slice(0,2);
}

function pickRibbon(it){
  const t = (it.note||'').toLowerCase();
  if(!t) return null;
  if(t.includes('m·ªõi')) return {text: it.note, cls:'ribbon--green'};
  if(t.includes('gi·∫£m')) return {text: it.note, cls:'ribbon--red'};
  if(t.includes('g·∫•p') || t.includes('c√≤n')) return {text: it.note, cls:''};
  return {text: it.note, cls:''};
}

/* lazy image */
function lazyImages(ctx=document){
  const imgs = $$('img[data-src]', ctx);
  const io = new IntersectionObserver(entries=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        const im = e.target;
        im.src = im.getAttribute('data-src');
        im.removeAttribute('data-src');
        io.unobserve(im);
      }
    });
  },{rootMargin:'200px'});
  imgs.forEach(im=>io.observe(im));
}

/* =============== CARD TEMPLATE (Classic) =============== */
function cardTemplate(it){
  const ribbon = pickRibbon(it);
  const tags   = classicTags(it);
  const priceStr = fmtPrice(it.price);

  const img = it.img || it.image || '';
  const title = it.id || '';
  const desc  = it.details || it.search || '';
  const link  = it.linkFull || it.link_full || it.link || '#';

  return `
    <article class="card">
      ${ribbon ? `<div class="ribbon ${ribbon.cls}">${escapeHTML(ribbon.text)}</div>` : ''}
      <img class="thumb" loading="lazy" data-src="${escapeHTML(img)}" alt="">
      <div class="body">
        <h3 class="title">${escapeHTML(title)}</h3>
        <p class="desc">${escapeHTML(desc)}</p>
        <div class="meta-row">
          <div class="price">${priceStr}</div>
          <div class="chips">
            ${tags.map(t=>`<span class="chip ${t.cls||''}">${escapeHTML(t.text)}</span>`).join('')}
          </div>
        </div>
        <div class="actions">
          <button class="btn">Nh·∫≠n qu√†</button>
          <a class="btn primary" href="${escapeHTML(link)}" target="_blank" rel="noopener">Chi ti·∫øt</a>
        </div>
      </div>
    </article>
  `;
}

/* ================== API ================== */
async function fetchList(){
  const p = new URLSearchParams({
    action:'list',
    page: state.page,
    pageSize: state.pageSize,
    q: state.filters.q || '',
    group: state.filters.group || '',
    type: state.filters.type || '',
    loai: state.filters.loai || '',
    note: state.filters.note || '',
    category: state.filters.category || ''
  });
  const url = `${API_BASE}?${p.toString()}`;
  const res = await fetch(url);
  if(!res.ok) throw new Error('Fetch list failed');
  return res.json();
}

async function fetchSuppliers(){
  const url = `${API_BASE}?action=suppliers`;
  const res = await fetch(url);
  if(!res.ok) return { ok:false, items:[] };
  return res.json();
}

/* ================== RENDER ================== */
function renderList(data){
  state.total = data.total || 0;
  const wrap = $('#list');
  wrap.innerHTML = (data.items||[]).map(cardTemplate).join('');
  lazyImages(wrap);
  buildPagination();
}

function buildPagination(){
  const totalPages = Math.max(1, Math.ceil(state.total / state.pageSize));
  const s1 = $('#pageSel'); const s2 = $('#pageSel2');
  function fill(sel){
    sel.innerHTML = '';
    for(let i=1;i<=totalPages;i++){
      const opt = document.createElement('option');
      opt.value = String(i); opt.textContent = `Trang ${i}/${totalPages}`;
      if(i===state.page) opt.selected = true;
      sel.appendChild(opt);
    }
  }
  fill(s1); fill(s2);
  $('#prev').disabled = state.page<=1;
  $('#next').disabled = state.page>=totalPages;
}

/* suppliers */
function renderSuppliers(data){
  const box = $('#suppliers');
  if(!data.ok || !data.items || !data.items.length){
    box.innerHTML = `<div class="muted">Ch∆∞a c√≥ d·ªØ li·ªáu.</div>`; return;
  }
  box.innerHTML = data.items.slice(0,10).map(s=>{
    return `
      <div class="sup-item">
        <div class="sup-logo"></div>
        <div>
          <div class="sup-name">${escapeHTML(s.name||'')}</div>
          <div class="sup-meta">${escapeHTML(s.address||'')}</div>
        </div>
        <div class="sup-tags">
          ${s.url ? `<a class="tag-mini good" href="${escapeHTML(s.url)}" target="_blank" rel="noopener">C√≥ website</a>`:''}
          ${s.cert ? `<a class="tag-mini" href="${escapeHTML(s.cert)}" target="_blank" rel="noopener">T·∫£i t·ªáp</a>`:''}
        </div>
      </div>
    `;
  }).join('');
}

/* ================== ACTIONS ================== */
async function load(){
  try{
    const [list, sups] = await Promise.all([ fetchList(), fetchSuppliers() ]);
    if(list && list.ok) renderList(list); else $('#list').innerHTML = '';
    renderSuppliers(sups||{});
  }catch(e){
    console.error(e);
    $('#list').innerHTML = `<div class="tile">Kh√¥ng t·∫£i ƒë∆∞·ª£c d·ªØ li·ªáu.</div>`;
  }
}

$('#btnSearch').addEventListener('click', ()=>{ state.filters.q = $('#q').value.trim(); state.page=1; load(); });
$('#q').addEventListener('keydown', e=>{ if(e.key==='Enter'){ $('#btnSearch').click(); }});

$('#btnClear').addEventListener('click', ()=>{
  state.filters = { q:'', group:'', type:'', loai:'', note:'', category:'' };
  $('#q').value = ''; state.page=1;
  $$('.group').forEach(b=>b.classList.remove('active'));
  $('.group[data-value=""]').classList.add('active');
  load();
});

$('#pageSel').addEventListener('change', e=>{ state.page = parseInt(e.target.value||'1',10); load(); });
$('#pageSel2').addEventListener('change', e=>{ state.page = parseInt(e.target.value||'1',10); load(); });
$('#prev').addEventListener('click', ()=>{ state.page = Math.max(1, state.page-1); load(); });
$('#next').addEventListener('click', ()=>{
  const totalPages = Math.max(1, Math.ceil(state.total / state.pageSize));
  state.page = Math.min(totalPages, state.page+1); load();
});

/* filter group buttons */
$('#filters').addEventListener('click', e=>{
  const btn = e.target.closest('[data-filter]');
  if(!btn) return;
  const f = btn.getAttribute('data-filter');
  const v = btn.getAttribute('data-value') || '';
  if(f==='group'){
    state.filters.group = v;
    $$('.group').forEach(b=>b.classList.remove('active')); btn.classList.add('active');
    state.page = 1; load();
  }
});

/* first load */
load();
</script>
</body>
</html>
