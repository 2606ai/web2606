<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PCGbrand - Thi·∫øt k·∫ø & Mua tr·ª±c ti·∫øp</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --main:#0018a8; --accent:#d4af37;
  --bg:#f5f6fa; --border:#e9e9ee;
}
body{font-family:'Be Vietnam Pro',sans-serif;background:var(--bg);color:#222;font-size:14px}
.container-xl{max-width:1320px}

/* Banner */
.top-ad{background:#0f172a;color:#fff;height:56px;display:flex;align-items:center;justify-content:center;position:sticky;top:0;z-index:1030}
.top-ad .inner{max-width:1320px;width:100%;display:flex;align-items:center;gap:10px}
.top-ad .msg{font-weight:700}
.top-ad .cta{margin-left:auto;display:flex;gap:8px}
.top-ad .cta a{background:#fff;color:#111;padding:6px 12px;border-radius:6px;text-decoration:none;font-weight:600}
.top-ad .cta a:hover{opacity:.9}

/* Navbar */
.navbar{background:#fff;border-bottom:1px solid var(--border)}
.search-input{border:1px solid #ddd;border-radius:10px;padding:6px 12px;width:100%}
.btn-cart{background:var(--main);color:#fff;border:none;border-radius:10px;padding:6px 12px}
.btn-cart .count{background:#fff;color:#111;border-radius:999px;padding:2px 8px;margin-left:6px;font-weight:800}

/* Hero */
.hero-card{border-radius:18px;overflow:hidden;background:#fff;box-shadow:0 18px 45px rgba(11,20,64,.08)}
#heroCarousel .carousel-item img{height:240px;object-fit:cover}
.hero-caption{position:absolute;left:0;right:0;bottom:14px;color:#fff;text-align:center;font-weight:700;font-size:20px;text-shadow:0 4px 18px rgba(0,0,0,.5)}

/* Categories */
.cats{display:flex;gap:8px;overflow:auto;padding:8px}
.cat-btn{white-space:nowrap;border:1px solid var(--border);padding:6px 14px;border-radius:999px;background:#fff;cursor:pointer;font-weight:600;font-size:13px}
.cat-btn.active,.cat-btn:hover{background:var(--accent);color:#fff;border-color:var(--accent)}

/* Sidebar */
.side-card{background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:0 10px 24px rgba(0,0,0,.06);padding:12px;margin-bottom:12px}
.service-item,.factory-item{display:flex;gap:10px;align-items:center;padding:8px;border:1px solid #eef0f4;border-radius:12px;background:#fff}
.service-icon,.factory-logo{flex:0 0 40px;height:40px;width:40px;border-radius:10px;overflow:hidden;background:#f7f9ff;display:flex;align-items:center;justify-content:center}
.factory-logo img{width:100%;height:100%;object-fit:cover}

/* Product grid */
.product-section{background:#fff;padding:12px;border-radius:18px;border:1px solid var(--border)}
.grid{display:grid;gap:10px;grid-template-columns:repeat(2,1fr)}
@media(min-width:768px){.grid{grid-template-columns:repeat(3,1fr)}}
@media(min-width:1200px){.grid{grid-template-columns:repeat(4,1fr)}}
.cardx{border:1px solid #eee;border-radius:12px;overflow:hidden;background:#fff;transition:.2s}
.cardx:hover{box-shadow:0 6px 14px rgba(0,0,0,.08)}
.thumb{width:100%;aspect-ratio:1/1;object-fit:cover;display:block}
.meta{padding:8px}
.id{font-weight:700;font-size:13px}
.price{color:#0066cc;font-weight:800;font-size:13px}
.note-badge{position:absolute;top:6px;left:6px;background:#ffc107;color:#111;padding:2px 6px;border-radius:6px;font-size:12px;font-weight:600}

/* Cart offcanvas */
.cart-item{display:flex;gap:8px;align-items:center;border-bottom:1px solid #eee;padding:6px 0}
.cart-item img{width:46px;height:46px;border-radius:6px;object-fit:cover}
.cart-item .meta{flex:1}
.total{font-weight:800;color:var(--accent)}

footer{margin-top:24px;padding:18px;background:var(--main);color:#fff;text-align:center;font-size:13px}
</style>
</head>
<body>

<!-- Banner -->
<div class="top-ad">
  <div class="inner">
    <div class="msg">∆Øu ƒë√£i th√°ng n√†y cho kh√°ch ƒë·∫∑t qua 2606ai.vn</div>
    <div class="cta">
      <a href="#factories">Xem x∆∞·ªüng uy t√≠n</a>
      <a href="https://zalo.me/0936169692" target="_blank">Chat nhanh Zalo</a>
    </div>
  </div>
</div>

<!-- Navbar -->
<nav class="navbar">
  <div class="container-xl d-flex align-items-center gap-2 py-2">
    <div class="fw-bold text-primary">PCGbrand</div>
    <input id="searchBox" class="search-input" placeholder="T√¨m s·∫£n ph·∫©m...">
    <button id="searchBtn" class="btn btn-primary">üîç</button>
    <button class="btn-cart ms-auto" type="button" data-bs-toggle="offcanvas" data-bs-target="#cartCanvas">
      üõí Gi·ªè h√†ng <span id="cartCount" class="count">0</span>
    </button>
  </div>
</nav>

<div class="container-xl my-3">
  <div class="row g-3">
    <!-- Sidebar -->
    <div class="col-lg-3">
      <div class="side-card">
        <div class="fw-bold mb-2">Quy·ªÅn l·ª£i khi ƒë·∫∑t h√†ng qua 2606ai.vn</div>
        <div class="service-item"><div class="service-icon">üè∑Ô∏è</div><div>B√°o gi√° nhanh 24h</div></div>
        <div class="service-item"><div class="service-icon">üõ†Ô∏è</div><div>Thi·∫øt k·∫ø & ch·ªânh s·ª≠a file mi·ªÖn ph√≠</div></div>
        <div class="service-item"><div class="service-icon">üîç</div><div>Duy·ªát m·∫´u tr∆∞·ªõc khi s·∫£n xu·∫•t</div></div>
        <div class="service-item"><div class="service-icon">‚úÖ</div><div>QC 2 l·ªõp & b·∫£o h√†nh</div></div>
        <div class="service-item"><div class="service-icon">üöö</div><div>Giao h√†ng to√†n qu·ªëc</div></div>
      </div>

      <div class="side-card" id="factories">
        <div class="fw-bold mb-2">X∆∞·ªüng s·∫£n xu·∫•t uy t√≠n</div>
        <div id="factoryList"></div>
      </div>
    </div>

    <!-- Main content -->
    <div class="col-lg-9">
      <!-- Hero -->
      <div class="hero-card mb-3">
        <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img src="https://picsum.photos/1200/240?random=21" class="d-block w-100">
              <div class="hero-caption">ƒê·∫∑t h√†ng theo thi·∫øt k·∫ø ri√™ng</div>
            </div>
            <div class="carousel-item">
              <img src="https://picsum.photos/1200/240?random=22" class="d-block w-100">
              <div class="hero-caption">QC 2 l·ªõp ‚Äì B·∫£o h√†nh uy t√≠n</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Categories -->
      <div id="categoryBox" class="cats"></div>

      <!-- Products -->
      <div class="product-section">
        <div class="d-flex justify-content-between mb-2">
          <h6 class="m-0">Danh s√°ch s·∫£n ph·∫©m</h6>
          <div>
            <button id="prevBtn" class="btn btn-light btn-sm">‚Üê Tr∆∞·ªõc</button>
            <button id="nextBtn" class="btn btn-light btn-sm">Sau ‚Üí</button>
          </div>
        </div>
        <div id="productGrid" class="grid"></div>
      </div>
    </div>
  </div>
</div>

<!-- Cart -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="cartCanvas">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">üõí Gi·ªè h√†ng</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <div id="cartListSide">Ch∆∞a c√≥ s·∫£n ph·∫©m.</div>
    <div class="d-flex justify-content-between mt-2">
      <span>T·ªïng:</span><span id="cartTotalSide" class="total">0 ƒë</span>
    </div>
  </div>
</div>

<footer>
  ¬© 2025 2606ai.vn ‚Äì All rights reserved
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
/* ---------- CONFIG ---------- */
const API_URL = "https://script.google.com/macros/s/AKfycbzn3_6jlvS8MlUsHrDCe5x8EwQTCgeIoDaTwM8Mg0Ba4Bq6jeRf1OodQRkVIFmR-2TB/exec";
let state={page:1,pageSize:12,q:'',group:''};
let cart=[];

/* ---------- UTILS ---------- */
const fmtVND=n=>(Number(n)||0).toLocaleString('vi-VN')+' ƒë';
const esc=s=>(s??'').toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');

/* ---------- FACTORIES ---------- */
function renderFactories(){
  const data=[
    {name:'X∆∞·ªüng 1 ‚Äì Tem kim lo·∫°i',desc:'Men m√†u, m·∫° v√†ng, ƒë√∫c n·ªïi 3D',logo:'https://picsum.photos/80?1'},
    {name:'X∆∞·ªüng 2 ‚Äì In UV',desc:'In UV ƒë·ªô b·ªÅn cao',logo:'https://picsum.photos/80?2'},
    {name:'X∆∞·ªüng 3 ‚Äì ƒê√∫c huy hi·ªáu',desc:'ƒê√∫c n·ªïi 3D, m·∫° m√†u cao c·∫•p',logo:'https://picsum.photos/80?3'}
  ];
  document.getElementById('factoryList').innerHTML=data.map(f=>`
    <div class="factory-item">
      <div class="factory-logo"><img src="${f.logo}"></div>
      <div>${esc(f.name)}<br><span class="text-muted small">${esc(f.desc)}</span></div>
    </div>`).join('');
}

/* ---------- RENDER ---------- */
function productCardHtml(it){
  return `<div class="cardx">
    ${it.chuy?`<span class="note-badge">${esc(it.chuy)}</span>`:''}
    <img class="thumb" src="${esc(it.img)}" onerror="this.src='https://via.placeholder.com/400x400?text=No+Image'">
    <div class="meta">
      <div class="id">${esc(it.id)}</div>
      <div class="small text-muted">${esc(it.details)}</div>
      <div class="price">${fmtVND(it.price)}</div>
    </div>
  </div>`;
}
function render(res){
  if(res?.facets?.groups){
    const box=document.getElementById('categoryBox');
    box.innerHTML=`<button class="cat-btn ${!state.group?'active':''}" data-group="">T·∫•t c·∫£</button>`+
      res.facets.groups.map(g=>`<button class="cat-btn ${state.group===g?'active':''}" data-group="${esc(g)}">${esc(g)}</button>`).join('');
    box.querySelectorAll('.cat-btn').forEach(b=>b.onclick=()=>{state.group=b.dataset.group;state.page=1;fetchPage();});
  }
  document.getElementById('productGrid').innerHTML=(res.items||[]).map(productCardHtml).join('')||'<div class="text-muted">Kh√¥ng c√≥ s·∫£n ph·∫©m.</div>';
}

/* ---------- FETCH ---------- */
function fetchPage(){
  fetch(`${API_URL}?action=list&page=${state.page}&pageSize=${state.pageSize}&q=${encodeURIComponent(state.q)}&group=${encodeURIComponent(state.group)}`)
    .then(r=>r.json()).then(render)
    .catch(e=>{document.getElementById('productGrid').innerHTML='<div class="text-danger">L·ªói t·∫£i d·ªØ li·ªáu</div>';console.error(e)});
}

/* ---------- EVENTS ---------- */
document.getElementById('searchBtn').onclick=()=>{state.q=document.getElementById('searchBox').value.trim();state.page=1;fetchPage();}
document.getElementById('searchBox').addEventListener('keypress',e=>{if(e.key==='Enter'){state.q=e.target.value.trim();state.page=1;fetchPage();}})
document.getElementById('prevBtn').onclick=()=>{if(state.page>1){state.page--;fetchPage();}}
document.getElementById('nextBtn').onclick=()=>{state.page++;fetchPage();}  

/* ---------- INIT ---------- */
document.addEventListener('DOMContentLoaded',()=>{renderFactories();fetchPage();});
</script>
</body>
</html>
